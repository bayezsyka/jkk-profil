import{u as yn,r as Ot,j as X}from"./app-BkaJp_q4.js";var Kt="http://www.w3.org/1999/xhtml";const _e={svg:"http://www.w3.org/2000/svg",xhtml:Kt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function It(e){var n=e+="",t=n.indexOf(":");return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),_e.hasOwnProperty(n)?{space:_e[n],local:e}:e}function _n(e){return function(){var n=this.ownerDocument,t=this.namespaceURI;return t===Kt&&n.documentElement.namespaceURI===Kt?n.createElement(e):n.createElementNS(t,e)}}function wn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function He(e){var n=It(e);return(n.local?wn:_n)(n)}function vn(){}function ce(e){return e==null?vn:function(){return this.querySelector(e)}}function Cn(e){typeof e!="function"&&(e=ce(e));for(var n=this._groups,t=n.length,r=new Array(t),i=0;i<t;++i)for(var o=n[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new D(r,this._parents)}function bn(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $n(){return[]}function Pe(e){return e==null?$n:function(){return this.querySelectorAll(e)}}function En(e){return function(){return bn(e.apply(this,arguments))}}function kn(e){typeof e=="function"?e=En(e):e=Pe(e);for(var n=this._groups,t=n.length,r=[],i=[],o=0;o<t;++o)for(var s=n[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(e.call(c,c.__data__,l,s)),i.push(c));return new D(r,i)}function Fe(e){return function(){return this.matches(e)}}function Oe(e){return function(n){return n.matches(e)}}var Sn=Array.prototype.find;function Nn(e){return function(){return Sn.call(this.children,e)}}function zn(){return this.firstElementChild}function Mn(e){return this.select(e==null?zn:Nn(typeof e=="function"?e:Oe(e)))}var Bn=Array.prototype.filter;function Tn(){return Array.from(this.children)}function An(e){return function(){return Bn.call(this.children,e)}}function Rn(e){return this.selectAll(e==null?Tn:An(typeof e=="function"?e:Oe(e)))}function Xn(e){typeof e!="function"&&(e=Fe(e));for(var n=this._groups,t=n.length,r=new Array(t),i=0;i<t;++i)for(var o=n[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new D(r,this._parents)}function We(e){return new Array(e.length)}function Ln(){return new D(this._enter||this._groups.map(We),this._parents)}function Bt(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Bt.prototype={constructor:Bt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Dn(e){return function(){return e}}function In(e,n,t,r,i,o){for(var s=0,a,c=n.length,l=o.length;s<l;++s)(a=n[s])?(a.__data__=o[s],r[s]=a):t[s]=new Bt(e,o[s]);for(;s<c;++s)(a=n[s])&&(i[s]=a)}function Yn(e,n,t,r,i,o,s){var a,c,l=new Map,u=n.length,f=o.length,d=new Array(u),p;for(a=0;a<u;++a)(c=n[a])&&(d[a]=p=s.call(c,c.__data__,a,n)+"",l.has(p)?i[a]=c:l.set(p,c));for(a=0;a<f;++a)p=s.call(e,o[a],a,o)+"",(c=l.get(p))?(r[a]=c,c.__data__=o[a],l.delete(p)):t[a]=new Bt(e,o[a]);for(a=0;a<u;++a)(c=n[a])&&l.get(d[a])===c&&(i[a]=c)}function Hn(e){return e.__data__}function Pn(e,n){if(!arguments.length)return Array.from(this,Hn);var t=n?Yn:In,r=this._parents,i=this._groups;typeof e!="function"&&(e=Dn(e));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],d=f.length,p=Fn(e.call(u,u&&u.__data__,l,r)),y=p.length,x=a[l]=new Array(y),C=s[l]=new Array(y),_=c[l]=new Array(d);t(u,f,x,C,_,p,n);for(var $=0,S=0,k,M;$<y;++$)if(k=x[$]){for($>=S&&(S=$+1);!(M=C[S])&&++S<y;);k._next=M||null}}return s=new D(s,r),s._enter=a,s._exit=c,s}function Fn(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function On(){return new D(this._exit||this._groups.map(We),this._parents)}function Wn(e,n,t){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),n!=null&&(i=n(i),i&&(i=i.selection())),t==null?o.remove():t(o),r&&i?r.merge(i).order():i}function qn(e){for(var n=e.selection?e.selection():e,t=this._groups,r=n._groups,i=t.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=t[c],u=r[c],f=l.length,d=a[c]=new Array(f),p,y=0;y<f;++y)(p=l[y]||u[y])&&(d[y]=p);for(;c<i;++c)a[c]=t[c];return new D(a,this._parents)}function Vn(){for(var e=this._groups,n=-1,t=e.length;++n<t;)for(var r=e[n],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Un(e){e||(e=Jn);function n(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var s=t[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(n)}return new D(i,this._parents).order()}function Jn(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Gn(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zn(){return Array.from(this)}function Kn(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var r=e[n],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Qn(){let e=0;for(const n of this)++e;return e}function jn(){return!this.node()}function tr(e){for(var n=this._groups,t=0,r=n.length;t<r;++t)for(var i=n[t],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function er(e){return function(){this.removeAttribute(e)}}function nr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rr(e,n){return function(){this.setAttribute(e,n)}}function ir(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function or(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function ar(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function sr(e,n){var t=It(e);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((n==null?t.local?nr:er:typeof n=="function"?t.local?ar:or:t.local?ir:rr)(t,n))}function qe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lr(e){return function(){this.style.removeProperty(e)}}function cr(e,n,t){return function(){this.style.setProperty(e,n,t)}}function ur(e,n,t){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,t)}}function hr(e,n,t){return arguments.length>1?this.each((n==null?lr:typeof n=="function"?ur:cr)(e,n,t??"")):at(this.node(),e)}function at(e,n){return e.style.getPropertyValue(n)||qe(e).getComputedStyle(e,null).getPropertyValue(n)}function fr(e){return function(){delete this[e]}}function dr(e,n){return function(){this[e]=n}}function pr(e,n){return function(){var t=n.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function gr(e,n){return arguments.length>1?this.each((n==null?fr:typeof n=="function"?pr:dr)(e,n)):this.node()[e]}function Ve(e){return e.trim().split(/^|\s+/)}function ue(e){return e.classList||new Ue(e)}function Ue(e){this._node=e,this._names=Ve(e.getAttribute("class")||"")}Ue.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Je(e,n){for(var t=ue(e),r=-1,i=n.length;++r<i;)t.add(n[r])}function Ge(e,n){for(var t=ue(e),r=-1,i=n.length;++r<i;)t.remove(n[r])}function mr(e){return function(){Je(this,e)}}function xr(e){return function(){Ge(this,e)}}function yr(e,n){return function(){(n.apply(this,arguments)?Je:Ge)(this,e)}}function _r(e,n){var t=Ve(e+"");if(arguments.length<2){for(var r=ue(this.node()),i=-1,o=t.length;++i<o;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof n=="function"?yr:n?mr:xr)(t,n))}function wr(){this.textContent=""}function vr(e){return function(){this.textContent=e}}function Cr(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function br(e){return arguments.length?this.each(e==null?wr:(typeof e=="function"?Cr:vr)(e)):this.node().textContent}function $r(){this.innerHTML=""}function Er(e){return function(){this.innerHTML=e}}function kr(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function Sr(e){return arguments.length?this.each(e==null?$r:(typeof e=="function"?kr:Er)(e)):this.node().innerHTML}function Nr(){this.nextSibling&&this.parentNode.appendChild(this)}function zr(){return this.each(Nr)}function Mr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Br(){return this.each(Mr)}function Tr(e){var n=typeof e=="function"?e:He(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Ar(){return null}function Rr(e,n){var t=typeof e=="function"?e:He(e),r=n==null?Ar:typeof n=="function"?n:ce(n);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function Xr(){var e=this.parentNode;e&&e.removeChild(this)}function Lr(){return this.each(Xr)}function Dr(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Ir(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Yr(e){return this.select(e?Ir:Dr)}function Hr(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pr(e){return function(n){e.call(this,n,this.__data__)}}function Fr(e){return e.trim().split(/^|\s+/).map(function(n){var t="",r=n.indexOf(".");return r>=0&&(t=n.slice(r+1),n=n.slice(0,r)),{type:n,name:t}})}function Or(e){return function(){var n=this.__on;if(n){for(var t=0,r=-1,i=n.length,o;t<i;++t)o=n[t],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function Wr(e,n,t){return function(){var r=this.__on,i,o=Pr(n);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=t),i.value=n;return}}this.addEventListener(e.type,o,t),i={type:e.type,name:e.name,value:n,listener:o,options:t},r?r.push(i):this.__on=[i]}}function qr(e,n,t){var r=Fr(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=n?Wr:Or,i=0;i<o;++i)this.each(a(r[i],n,t));return this}function Ze(e,n,t){var r=qe(e),i=r.CustomEvent;typeof i=="function"?i=new i(n,t):(i=r.document.createEvent("Event"),t?(i.initEvent(n,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(n,!1,!1)),e.dispatchEvent(i)}function Vr(e,n){return function(){return Ze(this,e,n)}}function Ur(e,n){return function(){return Ze(this,e,n.apply(this,arguments))}}function Jr(e,n){return this.each((typeof n=="function"?Ur:Vr)(e,n))}function*Gr(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var r=e[n],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Ke=[null];function D(e,n){this._groups=e,this._parents=n}function ct(){return new D([[document.documentElement]],Ke)}function Zr(){return this}D.prototype=ct.prototype={constructor:D,select:Cn,selectAll:kn,selectChild:Mn,selectChildren:Rn,filter:Xn,data:Pn,enter:Ln,exit:On,join:Wn,merge:qn,selection:Zr,order:Vn,sort:Un,call:Gn,nodes:Zn,node:Kn,size:Qn,empty:jn,each:tr,attr:sr,style:hr,property:gr,classed:_r,text:br,html:Sr,raise:zr,lower:Br,append:Tr,insert:Rr,remove:Lr,clone:Yr,datum:Hr,on:qr,dispatch:Jr,[Symbol.iterator]:Gr};function P(e){return typeof e=="string"?new D([[document.querySelector(e)]],[document.documentElement]):new D([[e]],Ke)}function Kr(e){let n;for(;n=e.sourceEvent;)e=n;return e}function tt(e,n){if(e=Kr(e),n===void 0&&(n=e.currentTarget),n){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[e.clientX-i.left-n.clientLeft,e.clientY-i.top-n.clientTop]}}return[e.pageX,e.pageY]}function Qr(e,n){var t=0,r=0;return Float64Array.from(e,n===void 0?i=>t+=+i||0:i=>t+=+n(i,r++,e)||0)}function jr(e,n){let t;if(n===void 0)for(const r of e)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of e)(i=n(i,++r,e))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function ti(e,n){let t;if(n===void 0)for(const r of e)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of e)(i=n(i,++r,e))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function ei(e,n){let t=0;if(n===void 0)for(let r of e)(r=+r)&&(t+=r);else{let r=-1;for(let i of e)(i=+n(i,++r,e))&&(t+=i)}return t}function ni(e){var n=0,t=e.children,r=t&&t.length;if(!r)n=1;else for(;--r>=0;)n+=t[r].value;e.value=n}function ri(){return this.eachAfter(ni)}function ii(e,n){let t=-1;for(const r of this)e.call(n,r,++t,this);return this}function oi(e,n){for(var t=this,r=[t],i,o,s=-1;t=r.pop();)if(e.call(n,t,++s,this),i=t.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function ai(e,n){for(var t=this,r=[t],i=[],o,s,a,c=-1;t=r.pop();)if(i.push(t),o=t.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;t=i.pop();)e.call(n,t,++c,this);return this}function si(e,n){let t=-1;for(const r of this)if(e.call(n,r,++t,this))return r}function li(e){return this.eachAfter(function(n){for(var t=+e(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)t+=r[i].value;n.value=t})}function ci(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function ui(e){for(var n=this,t=hi(n,e),r=[n];n!==t;)n=n.parent,r.push(n);for(var i=r.length;e!==t;)r.splice(i,0,e),e=e.parent;return r}function hi(e,n){if(e===n)return e;var t=e.ancestors(),r=n.ancestors(),i=null;for(e=t.pop(),n=r.pop();e===n;)i=e,e=t.pop(),n=r.pop();return i}function fi(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function di(){return Array.from(this)}function pi(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function gi(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n}function*mi(){var e=this,n,t=[e],r,i,o;do for(n=t.reverse(),t=[];e=n.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)t.push(r[i]);while(t.length)}function Qe(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=_i)):n===void 0&&(n=yi);for(var t=new st(e),r,i=[t],o,s,a,c;r=i.pop();)if((s=n(r.data))&&(c=(s=Array.from(s)).length))for(r.children=s,a=c-1;a>=0;--a)i.push(o=s[a]=new st(s[a])),o.parent=r,o.depth=r.depth+1;return t.eachBefore(je)}function xi(){return Qe(this).eachBefore(wi)}function yi(e){return e.children}function _i(e){return Array.isArray(e)?e[1]:null}function wi(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function je(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function st(e){this.data=e,this.depth=this.height=0,this.parent=null}st.prototype=Qe.prototype={constructor:st,count:ri,each:ii,eachAfter:ai,eachBefore:oi,find:si,sum:li,sort:ci,path:ui,ancestors:fi,descendants:di,leaves:pi,links:gi,copy:xi,[Symbol.iterator]:mi};function Wt(e){return e==null?null:vi(e)}function vi(e){if(typeof e!="function")throw new Error;return e}var Ci={depth:-1},we={},qt={};function bi(e){return e.id}function $i(e){return e.parentId}function Ei(){var e=bi,n=$i,t;function r(i){var o=Array.from(i),s=e,a=n,c,l,u,f,d,p,y,x,C=new Map;if(t!=null){const _=o.map((k,M)=>ki(t(k,M,i))),$=_.map(ve),S=new Set(_).add("");for(const k of $)S.has(k)||(S.add(k),_.push(k),$.push(ve(k)),o.push(qt));s=(k,M)=>_[M],a=(k,M)=>$[M]}for(u=0,c=o.length;u<c;++u)l=o[u],p=o[u]=new st(l),(y=s(l,u,i))!=null&&(y+="")&&(x=p.id=y,C.set(x,C.has(x)?we:p)),(y=a(l,u,i))!=null&&(y+="")&&(p.parent=y);for(u=0;u<c;++u)if(p=o[u],y=p.parent){if(d=C.get(y),!d)throw new Error("missing: "+y);if(d===we)throw new Error("ambiguous: "+y);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(t!=null){for(;f.data===qt&&f.children.length===1;)f=f.children[0],--c;for(let _=o.length-1;_>=0&&(p=o[_],p.data===qt);--_)p.data=null}if(f.parent=Ci,f.eachBefore(function(_){_.depth=_.parent.depth+1,--c}).eachBefore(je),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Wt(i),r):e},r.parentId=function(i){return arguments.length?(n=Wt(i),r):n},r.path=function(i){return arguments.length?(t=Wt(i),r):t},r}function ki(e){e=`${e}`;let n=e.length;return Qt(e,n-1)&&!Qt(e,n-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ve(e){let n=e.length;if(n<2)return"";for(;--n>1&&!Qt(e,n););return e.slice(0,n)}function Qt(e,n){if(e[n]==="/"){let t=0;for(;n>0&&e[--n]==="\\";)++t;if((t&1)===0)return!0}return!1}function Si(e,n){return e.parent===n.parent?1:2}function Vt(e){var n=e.children;return n?n[0]:e.t}function Ut(e){var n=e.children;return n?n[n.length-1]:e.t}function Ni(e,n,t){var r=t/(n.i-e.i);n.c-=r,n.s+=t,e.c+=r,n.z+=t,n.m+=t}function zi(e){for(var n=0,t=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=n,o.m+=n,n+=o.s+(t+=o.c)}function Mi(e,n,t){return e.a.parent===n.parent?e.a:t}function kt(e,n){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}kt.prototype=Object.create(st.prototype);function Bi(e){for(var n=new kt(e,0),t,r=[n],i,o,s,a;t=r.pop();)if(o=t._.children)for(t.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=t.children[s]=new kt(o[s],s)),i.parent=t;return(n.parent=new kt(null,0)).children=[n],n}function Ti(){var e=Si,n=1,t=1,r=null;function i(l){var u=Bi(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),r)l.eachBefore(c);else{var f=l,d=l,p=l;l.eachBefore(function($){$.x<f.x&&(f=$),$.x>d.x&&(d=$),$.depth>p.depth&&(p=$)});var y=f===d?1:e(f,d)/2,x=y-f.x,C=n/(d.x+y+x),_=t/(p.depth||1);l.eachBefore(function($){$.x=($.x+x)*C,$.y=$.depth*_})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){zi(l);var p=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-p):l.z=p}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,u,f){if(u){for(var d=l,p=l,y=u,x=d.parent.children[0],C=d.m,_=p.m,$=y.m,S=x.m,k;y=Ut(y),d=Vt(d),y&&d;)x=Vt(x),p=Ut(p),p.a=l,k=y.z+$-d.z-C+e(y._,d._),k>0&&(Ni(Mi(y,l,f),l,k),C+=k,_+=k),$+=y.m,C+=d.m,S+=x.m,_+=p.m;y&&!Ut(p)&&(p.t=y,p.m+=$-_),d&&!Vt(x)&&(x.t=d,x.m+=C-S,f=l)}return f}function c(l){l.x*=n,l.y=l.depth*t}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,n=+l[0],t=+l[1],i):r?null:[n,t]},i.nodeSize=function(l){return arguments.length?(r=!0,n=+l[0],t=+l[1],i):r?[n,t]:null},i}var Ai={value:()=>{}};function he(){for(var e=0,n=arguments.length,t={},r;e<n;++e){if(!(r=arguments[e]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new St(t)}function St(e){this._=e}function Ri(e,n){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}St.prototype=he.prototype={constructor:St,on:function(e,n){var t=this._,r=Ri(e+"",t),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Xi(t[i],e.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<s;)if(i=(e=r[o]).type)t[i]=Ce(t[i],e.name,n);else if(n==null)for(i in t)t[i]=Ce(t[i],e.name,null);return this},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new St(e)},call:function(e,n){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,o;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(n,t)}};function Xi(e,n){for(var t=0,r=e.length,i;t<r;++t)if((i=e[t]).name===n)return i.value}function Ce(e,n,t){for(var r=0,i=e.length;r<i;++r)if(e[r].name===n){e[r]=Ai,e=e.slice(0,r).concat(e.slice(r+1));break}return t!=null&&e.push({name:n,value:t}),e}const jt={capture:!0,passive:!1};function te(e){e.preventDefault(),e.stopImmediatePropagation()}function Li(e){var n=e.document.documentElement,t=P(e).on("dragstart.drag",te,jt);"onselectstart"in n?t.on("selectstart.drag",te,jt):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Di(e,n){var t=e.document.documentElement,r=P(e).on("dragstart.drag",null);n&&(r.on("click.drag",te,jt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function fe(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function tn(e,n){var t=Object.create(e.prototype);for(var r in n)t[r]=n[r];return t}function wt(){}var mt=.7,Tt=1/mt,ot="\\s*([+-]?\\d+)\\s*",xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",q="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ii=/^#([0-9a-f]{3,8})$/,Yi=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),Hi=new RegExp(`^rgb\\(${q},${q},${q}\\)$`),Pi=new RegExp(`^rgba\\(${ot},${ot},${ot},${xt}\\)$`),Fi=new RegExp(`^rgba\\(${q},${q},${q},${xt}\\)$`),Oi=new RegExp(`^hsl\\(${xt},${q},${q}\\)$`),Wi=new RegExp(`^hsla\\(${xt},${q},${q},${xt}\\)$`),be={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fe(wt,yt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$e,formatHex:$e,formatHex8:qi,formatHsl:Vi,formatRgb:Ee,toString:Ee});function $e(){return this.rgb().formatHex()}function qi(){return this.rgb().formatHex8()}function Vi(){return en(this).formatHsl()}function Ee(){return this.rgb().formatRgb()}function yt(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=Ii.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?ke(n):t===3?new L(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?Ct(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?Ct(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Yi.exec(e))?new L(n[1],n[2],n[3],1):(n=Hi.exec(e))?new L(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Pi.exec(e))?Ct(n[1],n[2],n[3],n[4]):(n=Fi.exec(e))?Ct(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Oi.exec(e))?ze(n[1],n[2]/100,n[3]/100,1):(n=Wi.exec(e))?ze(n[1],n[2]/100,n[3]/100,n[4]):be.hasOwnProperty(e)?ke(be[e]):e==="transparent"?new L(NaN,NaN,NaN,0):null}function ke(e){return new L(e>>16&255,e>>8&255,e&255,1)}function Ct(e,n,t,r){return r<=0&&(e=n=t=NaN),new L(e,n,t,r)}function Ui(e){return e instanceof wt||(e=yt(e)),e?(e=e.rgb(),new L(e.r,e.g,e.b,e.opacity)):new L}function ee(e,n,t,r){return arguments.length===1?Ui(e):new L(e,n,t,r??1)}function L(e,n,t,r){this.r=+e,this.g=+n,this.b=+t,this.opacity=+r}fe(L,ee,tn(wt,{brighter(e){return e=e==null?Tt:Math.pow(Tt,e),new L(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mt:Math.pow(mt,e),new L(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new L(rt(this.r),rt(this.g),rt(this.b),At(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Se,formatHex:Se,formatHex8:Ji,formatRgb:Ne,toString:Ne}));function Se(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}`}function Ji(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}${nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ne(){const e=At(this.opacity);return`${e===1?"rgb(":"rgba("}${rt(this.r)}, ${rt(this.g)}, ${rt(this.b)}${e===1?")":`, ${e})`}`}function At(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nt(e){return e=rt(e),(e<16?"0":"")+e.toString(16)}function ze(e,n,t,r){return r<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new F(e,n,t,r)}function en(e){if(e instanceof F)return new F(e.h,e.s,e.l,e.opacity);if(e instanceof wt||(e=yt(e)),!e)return new F;if(e instanceof F)return e;e=e.rgb();var n=e.r/255,t=e.g/255,r=e.b/255,i=Math.min(n,t,r),o=Math.max(n,t,r),s=NaN,a=o-i,c=(o+i)/2;return a?(n===o?s=(t-r)/a+(t<r)*6:t===o?s=(r-n)/a+2:s=(n-t)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new F(s,a,c,e.opacity)}function Gi(e,n,t,r){return arguments.length===1?en(e):new F(e,n,t,r??1)}function F(e,n,t,r){this.h=+e,this.s=+n,this.l=+t,this.opacity=+r}fe(F,Gi,tn(wt,{brighter(e){return e=e==null?Tt:Math.pow(Tt,e),new F(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mt:Math.pow(mt,e),new F(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*n,i=2*t-r;return new L(Jt(e>=240?e-240:e+120,i,r),Jt(e,i,r),Jt(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new F(Me(this.h),bt(this.s),bt(this.l),At(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=At(this.opacity);return`${e===1?"hsl(":"hsla("}${Me(this.h)}, ${bt(this.s)*100}%, ${bt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Me(e){return e=(e||0)%360,e<0?e+360:e}function bt(e){return Math.max(0,Math.min(1,e||0))}function Jt(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}const nn=e=>()=>e;function Zi(e,n){return function(t){return e+t*n}}function Ki(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(r){return Math.pow(e+r*n,t)}}function Qi(e){return(e=+e)==1?rn:function(n,t){return t-n?Ki(n,t,e):nn(isNaN(n)?t:n)}}function rn(e,n){var t=n-e;return t?Zi(e,t):nn(isNaN(e)?n:e)}const Be=(function e(n){var t=Qi(n);function r(i,o){var s=t((i=ee(i)).r,(o=ee(o)).r),a=t(i.g,o.g),c=t(i.b,o.b),l=rn(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r})(1);function j(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}var ne=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gt=new RegExp(ne.source,"g");function ji(e){return function(){return e}}function to(e){return function(n){return e(n)+""}}function eo(e,n){var t=ne.lastIndex=Gt.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(e=e+"",n=n+"";(r=ne.exec(e))&&(i=Gt.exec(n));)(o=i.index)>t&&(o=n.slice(t,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:j(r,i)})),t=Gt.lastIndex;return t<n.length&&(o=n.slice(t),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?to(c[0].x):ji(n):(n=c.length,function(l){for(var u=0,f;u<n;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}var Te=180/Math.PI,re={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function on(e,n,t,r,i,o){var s,a,c;return(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s),(c=e*t+n*r)&&(t-=e*c,r-=n*c),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,c/=a),e*r<n*t&&(e=-e,n=-n,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(n,e)*Te,skewX:Math.atan(c)*Te,scaleX:s,scaleY:a}}var $t;function no(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?re:on(n.a,n.b,n.c,n.d,n.e,n.f)}function ro(e){return e==null||($t||($t=document.createElementNS("http://www.w3.org/2000/svg","g")),$t.setAttribute("transform",e),!(e=$t.transform.baseVal.consolidate()))?re:(e=e.matrix,on(e.a,e.b,e.c,e.d,e.e,e.f))}function an(e,n,t,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,p,y){if(l!==f||u!==d){var x=p.push("translate(",null,n,null,t);y.push({i:x-4,x:j(l,f)},{i:x-2,x:j(u,d)})}else(f||d)&&p.push("translate("+f+n+d+t)}function s(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:j(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:j(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,p,y){if(l!==f||u!==d){var x=p.push(i(p)+"scale(",null,",",null,")");y.push({i:x-4,x:j(l,f)},{i:x-2,x:j(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),s(l.rotate,u.rotate,f,d),a(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(p){for(var y=-1,x=d.length,C;++y<x;)f[(C=d[y]).i]=C.x(p);return f.join("")}}}var io=an(no,"px, ","px)","deg)"),oo=an(ro,", ",")",")"),ao=1e-12;function Ae(e){return((e=Math.exp(e))+1/e)/2}function so(e){return((e=Math.exp(e))-1/e)/2}function lo(e){return((e=Math.exp(2*e))-1)/(e+1)}const co=(function e(n,t,r){function i(o,s){var a=o[0],c=o[1],l=o[2],u=s[0],f=s[1],d=s[2],p=u-a,y=f-c,x=p*p+y*y,C,_;if(x<ao)_=Math.log(d/l)/n,C=function(R){return[a+R*p,c+R*y,l*Math.exp(n*R*_)]};else{var $=Math.sqrt(x),S=(d*d-l*l+r*x)/(2*l*t*$),k=(d*d-l*l-r*x)/(2*d*t*$),M=Math.log(Math.sqrt(S*S+1)-S),A=Math.log(Math.sqrt(k*k+1)-k);_=(A-M)/n,C=function(R){var U=R*_,I=Ae(M),ut=l/(t*$)*(I*lo(n*U+M)-so(M));return[a+ut*p,c+ut*y,l*I/Ae(n*U+M)]}}return C.duration=_*1e3*n/Math.SQRT2,C}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return e(s,a,c)},i})(Math.SQRT2,2,4);var lt=0,pt=0,ft=0,sn=1e3,Rt,gt,Xt=0,it=0,Yt=0,_t=typeof performance=="object"&&performance.now?performance:Date,ln=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function de(){return it||(ln(uo),it=_t.now()+Yt)}function uo(){it=0}function Lt(){this._call=this._time=this._next=null}Lt.prototype=cn.prototype={constructor:Lt,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?de():+t)+(n==null?0:+n),!this._next&&gt!==this&&(gt?gt._next=this:Rt=this,gt=this),this._call=e,this._time=t,ie()},stop:function(){this._call&&(this._call=null,this._time=1/0,ie())}};function cn(e,n,t){var r=new Lt;return r.restart(e,n,t),r}function ho(){de(),++lt;for(var e=Rt,n;e;)(n=it-e._time)>=0&&e._call.call(void 0,n),e=e._next;--lt}function Re(){it=(Xt=_t.now())+Yt,lt=pt=0;try{ho()}finally{lt=0,po(),it=0}}function fo(){var e=_t.now(),n=e-Xt;n>sn&&(Yt-=n,Xt=e)}function po(){for(var e,n=Rt,t,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Rt=t);gt=e,ie(r)}function ie(e){if(!lt){pt&&(pt=clearTimeout(pt));var n=e-it;n>24?(e<1/0&&(pt=setTimeout(Re,e-_t.now()-Yt)),ft&&(ft=clearInterval(ft))):(ft||(Xt=_t.now(),ft=setInterval(fo,sn)),lt=1,ln(Re))}}function Xe(e,n,t){var r=new Lt;return n=n==null?0:+n,r.restart(i=>{r.stop(),e(i+n)},n,t),r}var go=he("start","end","cancel","interrupt"),mo=[],un=0,Le=1,oe=2,Nt=3,De=4,ae=5,zt=6;function Ht(e,n,t,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(t in s)return;xo(e,t,{name:n,index:r,group:i,on:go,tween:mo,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:un})}function pe(e,n){var t=O(e,n);if(t.state>un)throw new Error("too late; already scheduled");return t}function V(e,n){var t=O(e,n);if(t.state>Nt)throw new Error("too late; already running");return t}function O(e,n){var t=e.__transition;if(!t||!(t=t[n]))throw new Error("transition not found");return t}function xo(e,n,t){var r=e.__transition,i;r[n]=t,t.timer=cn(o,0,t.time);function o(l){t.state=Le,t.timer.restart(s,t.delay,t.time),t.delay<=l&&s(l-t.delay)}function s(l){var u,f,d,p;if(t.state!==Le)return c();for(u in r)if(p=r[u],p.name===t.name){if(p.state===Nt)return Xe(s);p.state===De?(p.state=zt,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<n&&(p.state=zt,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(Xe(function(){t.state===Nt&&(t.state=De,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=oe,t.on.call("start",e,e.__data__,t.index,t.group),t.state===oe){for(t.state=Nt,i=new Array(d=t.tween.length),u=0,f=-1;u<d;++u)(p=t.tween[u].value.call(e,e.__data__,t.index,t.group))&&(i[++f]=p);i.length=f+1}}function a(l){for(var u=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=ae,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);t.state===ae&&(t.on.call("end",e,e.__data__,t.index,t.group),c())}function c(){t.state=zt,t.timer.stop(),delete r[n];for(var l in r)return;delete e.__transition}}function Mt(e,n){var t=e.__transition,r,i,o=!0,s;if(t){n=n==null?null:n+"";for(s in t){if((r=t[s]).name!==n){o=!1;continue}i=r.state>oe&&r.state<ae,r.state=zt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete t[s]}o&&delete e.__transition}}function yo(e){return this.each(function(){Mt(this,e)})}function _o(e,n){var t,r;return function(){var i=V(this,e),o=i.tween;if(o!==t){r=t=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===n){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function wo(e,n,t){var r,i;if(typeof t!="function")throw new Error;return function(){var o=V(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:n,value:t},c=0,l=i.length;c<l;++c)if(i[c].name===n){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function vo(e,n){var t=this._id;if(e+="",arguments.length<2){for(var r=O(this.node(),t).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((n==null?_o:wo)(t,e,n))}function ge(e,n,t){var r=e._id;return e.each(function(){var i=V(this,r);(i.value||(i.value={}))[n]=t.apply(this,arguments)}),function(i){return O(i,r).value[n]}}function hn(e,n){var t;return(typeof n=="number"?j:n instanceof yt?Be:(t=yt(n))?(n=t,Be):eo)(e,n)}function Co(e){return function(){this.removeAttribute(e)}}function bo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $o(e,n,t){var r,i=t+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=n(r=s,t)}}function Eo(e,n,t){var r,i=t+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=n(r=s,t)}}function ko(e,n,t){var r,i,o;return function(){var s,a=t(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=n(r=s,a)))}}function So(e,n,t){var r,i,o;return function(){var s,a=t(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=n(r=s,a)))}}function No(e,n){var t=It(e),r=t==="transform"?oo:hn;return this.attrTween(e,typeof n=="function"?(t.local?So:ko)(t,r,ge(this,"attr."+e,n)):n==null?(t.local?bo:Co)(t):(t.local?Eo:$o)(t,r,n))}function zo(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}function Mo(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}function Bo(e,n){var t,r;function i(){var o=n.apply(this,arguments);return o!==r&&(t=(r=o)&&Mo(e,o)),t}return i._value=n,i}function To(e,n){var t,r;function i(){var o=n.apply(this,arguments);return o!==r&&(t=(r=o)&&zo(e,o)),t}return i._value=n,i}function Ao(e,n){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;var r=It(e);return this.tween(t,(r.local?Bo:To)(r,n))}function Ro(e,n){return function(){pe(this,e).delay=+n.apply(this,arguments)}}function Xo(e,n){return n=+n,function(){pe(this,e).delay=n}}function Lo(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Ro:Xo)(n,e)):O(this.node(),n).delay}function Do(e,n){return function(){V(this,e).duration=+n.apply(this,arguments)}}function Io(e,n){return n=+n,function(){V(this,e).duration=n}}function Yo(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Do:Io)(n,e)):O(this.node(),n).duration}function Ho(e,n){if(typeof n!="function")throw new Error;return function(){V(this,e).ease=n}}function Po(e){var n=this._id;return arguments.length?this.each(Ho(n,e)):O(this.node(),n).ease}function Fo(e,n){return function(){var t=n.apply(this,arguments);if(typeof t!="function")throw new Error;V(this,e).ease=t}}function Oo(e){if(typeof e!="function")throw new Error;return this.each(Fo(this._id,e))}function Wo(e){typeof e!="function"&&(e=Fe(e));for(var n=this._groups,t=n.length,r=new Array(t),i=0;i<t;++i)for(var o=n[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new Q(r,this._parents,this._name,this._id)}function qo(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,t=e._groups,r=n.length,i=t.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=n[a],l=t[a],u=c.length,f=s[a]=new Array(u),d,p=0;p<u;++p)(d=c[p]||l[p])&&(f[p]=d);for(;a<r;++a)s[a]=n[a];return new Q(s,this._parents,this._name,this._id)}function Vo(e){return(e+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||n==="start"})}function Uo(e,n,t){var r,i,o=Vo(n)?pe:V;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(n,t),s.on=i}}function Jo(e,n){var t=this._id;return arguments.length<2?O(this.node(),t).on.on(e):this.each(Uo(t,e,n))}function Go(e){return function(){var n=this.parentNode;for(var t in this.__transition)if(+t!==e)return;n&&n.removeChild(this)}}function Zo(){return this.on("end.remove",Go(this._id))}function Ko(e){var n=this._name,t=this._id;typeof e!="function"&&(e=ce(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),u,f,d=0;d<c;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),l[d]=f,Ht(l[d],n,t,d,l,O(u,t)));return new Q(o,this._parents,n,t)}function Qo(e){var n=this._name,t=this._id;typeof e!="function"&&(e=Pe(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var d=e.call(u,u.__data__,f,c),p,y=O(u,t),x=0,C=d.length;x<C;++x)(p=d[x])&&Ht(p,n,t,x,d,y);o.push(d),s.push(u)}return new Q(o,s,n,t)}var jo=ct.prototype.constructor;function ta(){return new jo(this._groups,this._parents)}function ea(e,n){var t,r,i;return function(){var o=at(this,e),s=(this.style.removeProperty(e),at(this,e));return o===s?null:o===t&&s===r?i:i=n(t=o,r=s)}}function fn(e){return function(){this.style.removeProperty(e)}}function na(e,n,t){var r,i=t+"",o;return function(){var s=at(this,e);return s===i?null:s===r?o:o=n(r=s,t)}}function ra(e,n,t){var r,i,o;return function(){var s=at(this,e),a=t(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),at(this,e))),s===c?null:s===r&&c===i?o:(i=c,o=n(r=s,a))}}function ia(e,n){var t,r,i,o="style."+n,s="end."+o,a;return function(){var c=V(this,e),l=c.on,u=c.value[o]==null?a||(a=fn(n)):void 0;(l!==t||i!==u)&&(r=(t=l).copy()).on(s,i=u),c.on=r}}function oa(e,n,t){var r=(e+="")=="transform"?io:hn;return n==null?this.styleTween(e,ea(e,r)).on("end.style."+e,fn(e)):typeof n=="function"?this.styleTween(e,ra(e,r,ge(this,"style."+e,n))).each(ia(this._id,e)):this.styleTween(e,na(e,r,n),t).on("end.style."+e,null)}function aa(e,n,t){return function(r){this.style.setProperty(e,n.call(this,r),t)}}function sa(e,n,t){var r,i;function o(){var s=n.apply(this,arguments);return s!==i&&(r=(i=s)&&aa(e,s,t)),r}return o._value=n,o}function la(e,n,t){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,sa(e,n,t??""))}function ca(e){return function(){this.textContent=e}}function ua(e){return function(){var n=e(this);this.textContent=n??""}}function ha(e){return this.tween("text",typeof e=="function"?ua(ge(this,"text",e)):ca(e==null?"":e+""))}function fa(e){return function(n){this.textContent=e.call(this,n)}}function da(e){var n,t;function r(){var i=e.apply(this,arguments);return i!==t&&(n=(t=i)&&fa(i)),n}return r._value=e,r}function pa(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,da(e))}function ga(){for(var e=this._name,n=this._id,t=dn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=O(c,n);Ht(c,e,t,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Q(r,this._parents,e,t)}function ma(){var e,n,t=this,r=t._id,i=t.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};t.each(function(){var l=V(this,r),u=l.on;u!==e&&(n=(e=u).copy(),n._.cancel.push(a),n._.interrupt.push(a),n._.end.push(c)),l.on=n}),i===0&&o()})}var xa=0;function Q(e,n,t,r){this._groups=e,this._parents=n,this._name=t,this._id=r}function dn(){return++xa}var Z=ct.prototype;Q.prototype={constructor:Q,select:Ko,selectAll:Qo,selectChild:Z.selectChild,selectChildren:Z.selectChildren,filter:Wo,merge:qo,selection:ta,transition:ga,call:Z.call,nodes:Z.nodes,node:Z.node,size:Z.size,empty:Z.empty,each:Z.each,on:Jo,attr:No,attrTween:Ao,style:oa,styleTween:la,text:ha,textTween:pa,remove:Zo,tween:vo,delay:Lo,duration:Yo,ease:Po,easeVarying:Oo,end:ma,[Symbol.iterator]:Z[Symbol.iterator]};function ya(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _a={time:null,delay:0,duration:250,ease:ya};function wa(e,n){for(var t;!(t=e.__transition)||!(t=t[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return t}function va(e){var n,t;e instanceof Q?(n=e._id,e=e._name):(n=dn(),(t=_a).time=de(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&Ht(c,e,n,l,s,t||wa(c,n));return new Q(r,this._parents,e,n)}ct.prototype.interrupt=yo;ct.prototype.transition=va;const Et=e=>()=>e;function Ca(e,{sourceEvent:n,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function K(e,n,t){this.k=e,this.x=n,this.y=t}K.prototype={constructor:K,scale:function(e){return e===1?this:new K(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new K(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var me=new K(1,0,0);K.prototype;function Zt(e){e.stopImmediatePropagation()}function dt(e){e.preventDefault(),e.stopImmediatePropagation()}function ba(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function $a(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ie(){return this.__zoom||me}function Ea(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ka(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sa(e,n,t){var r=e.invertX(n[0][0])-t[0][0],i=e.invertX(n[1][0])-t[1][0],o=e.invertY(n[0][1])-t[0][1],s=e.invertY(n[1][1])-t[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Na(){var e=ba,n=$a,t=Sa,r=Ea,i=ka,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=co,l=he("start","zoom","end"),u,f,d,p=500,y=150,x=0,C=10;function _(g){g.property("__zoom",Ie).on("wheel.zoom",U,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",ut).filter(i).on("touchstart.zoom",vt).on("touchmove.zoom",ht).on("touchend.zoom touchcancel.zoom",Pt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(g,h,m,w){var v=g.selection?g.selection():g;v.property("__zoom",Ie),g!==v?M(g,h,m,w):v.interrupt().each(function(){A(this,arguments).event(w).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},_.scaleBy=function(g,h,m,w){_.scaleTo(g,function(){var v=this.__zoom.k,b=typeof h=="function"?h.apply(this,arguments):h;return v*b},m,w)},_.scaleTo=function(g,h,m,w){_.transform(g,function(){var v=n.apply(this,arguments),b=this.__zoom,E=m==null?k(v):typeof m=="function"?m.apply(this,arguments):m,N=b.invert(E),B=typeof h=="function"?h.apply(this,arguments):h;return t(S($(b,B),E,N),v,s)},m,w)},_.translateBy=function(g,h,m,w){_.transform(g,function(){return t(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof m=="function"?m.apply(this,arguments):m),n.apply(this,arguments),s)},null,w)},_.translateTo=function(g,h,m,w,v){_.transform(g,function(){var b=n.apply(this,arguments),E=this.__zoom,N=w==null?k(b):typeof w=="function"?w.apply(this,arguments):w;return t(me.translate(N[0],N[1]).scale(E.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof m=="function"?-m.apply(this,arguments):-m),b,s)},w,v)};function $(g,h){return h=Math.max(o[0],Math.min(o[1],h)),h===g.k?g:new K(h,g.x,g.y)}function S(g,h,m){var w=h[0]-m[0]*g.k,v=h[1]-m[1]*g.k;return w===g.x&&v===g.y?g:new K(g.k,w,v)}function k(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function M(g,h,m,w){g.on("start.zoom",function(){A(this,arguments).event(w).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(w).end()}).tween("zoom",function(){var v=this,b=arguments,E=A(v,b).event(w),N=n.apply(v,b),B=m==null?k(N):typeof m=="function"?m.apply(v,b):m,W=Math.max(N[1][0]-N[0][0],N[1][1]-N[0][1]),T=v.__zoom,Y=typeof h=="function"?h.apply(v,b):h,J=c(T.invert(B).concat(W/T.k),Y.invert(B).concat(W/Y.k));return function(H){if(H===1)H=Y;else{var G=J(H),Ft=W/G[2];H=new K(Ft,B[0]-G[0]*Ft,B[1]-G[1]*Ft)}E.zoom(null,H)}})}function A(g,h,m){return!m&&g.__zooming||new R(g,h)}function R(g,h){this.that=g,this.args=h,this.active=0,this.sourceEvent=null,this.extent=n.apply(g,h),this.taps=0}R.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,h){return this.mouse&&g!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var h=P(this.that).datum();l.call(g,this.that,new Ca(g,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),h)}};function U(g,...h){if(!e.apply(this,arguments))return;var m=A(this,h).event(g),w=this.__zoom,v=Math.max(o[0],Math.min(o[1],w.k*Math.pow(2,r.apply(this,arguments)))),b=tt(g);if(m.wheel)(m.mouse[0][0]!==b[0]||m.mouse[0][1]!==b[1])&&(m.mouse[1]=w.invert(m.mouse[0]=b)),clearTimeout(m.wheel);else{if(w.k===v)return;m.mouse=[b,w.invert(b)],Mt(this),m.start()}dt(g),m.wheel=setTimeout(E,y),m.zoom("mouse",t(S($(w,v),m.mouse[0],m.mouse[1]),m.extent,s));function E(){m.wheel=null,m.end()}}function I(g,...h){if(d||!e.apply(this,arguments))return;var m=g.currentTarget,w=A(this,h,!0).event(g),v=P(g.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",W,!0),b=tt(g,m),E=g.clientX,N=g.clientY;Li(g.view),Zt(g),w.mouse=[b,this.__zoom.invert(b)],Mt(this),w.start();function B(T){if(dt(T),!w.moved){var Y=T.clientX-E,J=T.clientY-N;w.moved=Y*Y+J*J>x}w.event(T).zoom("mouse",t(S(w.that.__zoom,w.mouse[0]=tt(T,m),w.mouse[1]),w.extent,s))}function W(T){v.on("mousemove.zoom mouseup.zoom",null),Di(T.view,w.moved),dt(T),w.event(T).end()}}function ut(g,...h){if(e.apply(this,arguments)){var m=this.__zoom,w=tt(g.changedTouches?g.changedTouches[0]:g,this),v=m.invert(w),b=m.k*(g.shiftKey?.5:2),E=t(S($(m,b),w,v),n.apply(this,h),s);dt(g),a>0?P(this).transition().duration(a).call(M,E,w,g):P(this).call(_.transform,E,w,g)}}function vt(g,...h){if(e.apply(this,arguments)){var m=g.touches,w=m.length,v=A(this,h,g.changedTouches.length===w).event(g),b,E,N,B;for(Zt(g),E=0;E<w;++E)N=m[E],B=tt(N,this),B=[B,this.__zoom.invert(B),N.identifier],v.touch0?!v.touch1&&v.touch0[2]!==B[2]&&(v.touch1=B,v.taps=0):(v.touch0=B,b=!0,v.taps=1+!!u);u&&(u=clearTimeout(u)),b&&(v.taps<2&&(f=B[0],u=setTimeout(function(){u=null},p)),Mt(this),v.start())}}function ht(g,...h){if(this.__zooming){var m=A(this,h).event(g),w=g.changedTouches,v=w.length,b,E,N,B;for(dt(g),b=0;b<v;++b)E=w[b],N=tt(E,this),m.touch0&&m.touch0[2]===E.identifier?m.touch0[0]=N:m.touch1&&m.touch1[2]===E.identifier&&(m.touch1[0]=N);if(E=m.that.__zoom,m.touch1){var W=m.touch0[0],T=m.touch0[1],Y=m.touch1[0],J=m.touch1[1],H=(H=Y[0]-W[0])*H+(H=Y[1]-W[1])*H,G=(G=J[0]-T[0])*G+(G=J[1]-T[1])*G;E=$(E,Math.sqrt(H/G)),N=[(W[0]+Y[0])/2,(W[1]+Y[1])/2],B=[(T[0]+J[0])/2,(T[1]+J[1])/2]}else if(m.touch0)N=m.touch0[0],B=m.touch0[1];else return;m.zoom("touch",t(S(E,N,B),m.extent,s))}}function Pt(g,...h){if(this.__zooming){var m=A(this,h).event(g),w=g.changedTouches,v=w.length,b,E;for(Zt(g),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),b=0;b<v;++b)E=w[b],m.touch0&&m.touch0[2]===E.identifier?delete m.touch0:m.touch1&&m.touch1[2]===E.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(E=tt(E,this),Math.hypot(f[0]-E[0],f[1]-E[1])<C)){var N=P(this).on("dblclick.zoom");N&&N.apply(this,arguments)}}}return _.wheelDelta=function(g){return arguments.length?(r=typeof g=="function"?g:Et(+g),_):r},_.filter=function(g){return arguments.length?(e=typeof g=="function"?g:Et(!!g),_):e},_.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:Et(!!g),_):i},_.extent=function(g){return arguments.length?(n=typeof g=="function"?g:Et([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),_):n},_.scaleExtent=function(g){return arguments.length?(o[0]=+g[0],o[1]=+g[1],_):[o[0],o[1]]},_.translateExtent=function(g){return arguments.length?(s[0][0]=+g[0][0],s[1][0]=+g[1][0],s[0][1]=+g[0][1],s[1][1]=+g[1][1],_):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},_.constrain=function(g){return arguments.length?(t=g,_):t},_.duration=function(g){return arguments.length?(a=+g,_):a},_.interpolate=function(g){return arguments.length?(c=g,_):c},_.on=function(){var g=l.on.apply(l,arguments);return g===l?_:g},_.clickDistance=function(g){return arguments.length?(x=(g=+g)*g,_):Math.sqrt(x)},_.tapDistance=function(g){return arguments.length?(C=+g,_):C},_}function za(e){var n=0,t=e.children,r=t&&t.length;if(!r)n=1;else for(;--r>=0;)n+=t[r].value;e.value=n}function Ma(){return this.eachAfter(za)}function Ba(e){var n=this,t,r=[n],i,o,s;do for(t=r.reverse(),r=[];n=t.pop();)if(e(n),i=n.children,i)for(o=0,s=i.length;o<s;++o)r.push(i[o]);while(r.length);return this}function Ta(e){for(var n=this,t=[n],r,i;n=t.pop();)if(e(n),r=n.children,r)for(i=r.length-1;i>=0;--i)t.push(r[i]);return this}function Aa(e){for(var n=this,t=[n],r=[],i,o,s;n=t.pop();)if(r.push(n),i=n.children,i)for(o=0,s=i.length;o<s;++o)t.push(i[o]);for(;n=r.pop();)e(n);return this}function Ra(e){return this.eachAfter(function(n){for(var t=+e(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)t+=r[i].value;n.value=t})}function Xa(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function La(e){for(var n=this,t=Da(n,e),r=[n];n!==t;)n=n.parent,r.push(n);for(var i=r.length;e!==t;)r.splice(i,0,e),e=e.parent;return r}function Da(e,n){if(e===n)return e;var t=e.ancestors(),r=n.ancestors(),i=null;for(e=t.pop(),n=r.pop();e===n;)i=e,e=t.pop(),n=r.pop();return i}function Ia(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function Ya(){var e=[];return this.each(function(n){e.push(n)}),e}function Ha(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function Pa(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n}function xe(e,n){var t=new Dt(e),r=+e.value&&(t.value=e.value),i,o=[t],s,a,c,l;for(n==null&&(n=Oa);i=o.pop();)if(r&&(i.value=+i.data.value),(a=n(i.data))&&(l=a.length))for(i.children=new Array(l),c=l-1;c>=0;--c)o.push(s=i.children[c]=new Dt(a[c])),s.parent=i,s.depth=i.depth+1;return t.eachBefore(qa)}function Fa(){return xe(this).eachBefore(Wa)}function Oa(e){return e.children}function Wa(e){e.data=e.data.data}function qa(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function Dt(e){this.data=e,this.depth=this.height=0,this.parent=null}Dt.prototype=xe.prototype={constructor:Dt,count:Ma,each:Ba,eachAfter:Aa,eachBefore:Ta,sum:Ra,sort:Xa,path:La,ancestors:Ia,descendants:Ya,leaves:Ha,links:Pa,copy:Fa};const Va="2.1.2",Ua={version:Va},{version:Ja}=Ua,Ga=Object.freeze({children:e=>e.children,nodeSize:e=>e.data.size,spacing:0});function ye(e){const n=Object.assign({},Ga,e);function t(a){const c=n[a];return typeof c=="function"?c:()=>c}function r(a){const c=s(o(),a,l=>l.children);return c.update(),c.data}function i(){const a=t("nodeSize"),c=t("spacing");return class pn extends xe.prototype.constructor{constructor(u){super(u)}copy(){const u=s(this.constructor,this,f=>f.children);return u.each(f=>f.data=f.data.data),u}get size(){return a(this)}spacing(u){return c(this,u)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){const u=this.ancestors();return u[u.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((u,f)=>pn.maxExtents(u,f.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(u,f){return{top:Math.min(u.top,f.top),bottom:Math.max(u.bottom,f.bottom),left:Math.min(u.left,f.left),right:Math.max(u.right,f.right)}}}}function o(){const a=i(),c=t("nodeSize"),l=t("spacing");return class extends a{constructor(u){super(u),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return c(this.data)}spacing(u){return l(this.data,u.data)}get x(){return this.data.x}set x(u){this.data.x=u}get y(){return this.data.y}set y(u){this.data.y=u}update(){return gn(this),mn(this),this}}}function s(a,c,l){const u=(f,d)=>{const p=new a(f);Object.assign(p,{parent:d,depth:d===null?0:d.depth+1,height:0,length:1});const y=l(f)||[];return p.children=y.length===0?null:y.map(x=>u(x,p)),p.children&&Object.assign(p,p.children.reduce((x,C)=>({height:Math.max(x.height,C.height+1),length:x.length+C.length}),p)),p};return u(c,null)}return Object.assign(r,{nodeSize(a){return arguments.length?(n.nodeSize=a,r):n.nodeSize},spacing(a){return arguments.length?(n.spacing=a,r):n.spacing},children(a){return arguments.length?(n.children=a,r):n.children},hierarchy(a,c){const l=typeof c>"u"?n.children:c;return s(i(),a,l)},dump(a){const c=t("nodeSize"),l=u=>f=>{const d=u+"  ",p=u+"    ",{x:y,y:x}=f,C=c(f),_=f.children||[],$=_.length===0?" ":`,${d}children: [${p}${_.map(l(p)).join(p)}${d}],${u}`;return`{ size: [${C.join(", ")}],${d}x: ${y}, y: ${x}${$}},`};return l(`
`)(a)}}),r}ye.version=Ja;const gn=(e,n=0)=>(e.y=n,(e.children||[]).reduce((t,r)=>{const[i,o]=t;gn(r,e.y+e.ySize);const s=(i===0?r.lExt:r.rExt).bottom;i!==0&&Ka(e,i,o);const a=os(s,i,o);return[i+1,a]},[0,null]),Za(e),is(e),e),mn=(e,n,t)=>{typeof n>"u"&&(n=-e.relX-e.prelim,t=0);const r=n+e.relX;return e.relX=r+e.prelim-t,e.prelim=0,e.x=t+e.relX,(e.children||[]).forEach(i=>mn(i,r,e.x)),e},Za=e=>{(e.children||[]).reduce((n,t)=>{const[r,i]=n,o=r+t.shift,s=i+o+t.change;return t.relX+=s,[o,s]},[0,0])},Ka=(e,n,t)=>{const r=e.children[n-1],i=e.children[n];let o=r,s=r.relX,a=i,c=i.relX,l=!0;for(;o&&a;){o.bottom>t.lowY&&(t=t.next);const u=s+o.prelim-(c+a.prelim)+o.xSize/2+a.xSize/2+o.spacing(a);(u>0||u<0&&l)&&(c+=u,Qa(i,u),ja(e,n,t.index,u)),l=!1;const f=o.bottom,d=a.bottom;f<=d&&(o=es(o),o&&(s+=o.relX)),f>=d&&(a=ts(a),a&&(c+=a.relX))}!o&&a?ns(e,n,a,c):o&&!a&&rs(e,n,o,s)},Qa=(e,n)=>{e.relX+=n,e.lExtRelX+=n,e.rExtRelX+=n},ja=(e,n,t,r)=>{const i=e.children[n],o=n-t;if(o>1){const s=r/o;e.children[t+1].shift+=s,i.shift-=s,i.change-=r-s}},ts=e=>e.hasChildren?e.firstChild:e.lThr,es=e=>e.hasChildren?e.lastChild:e.rThr,ns=(e,n,t,r)=>{const i=e.firstChild,o=i.lExt,s=e.children[n];o.lThr=t;const a=r-t.relX-i.lExtRelX;o.relX+=a,o.prelim-=a,i.lExt=s.lExt,i.lExtRelX=s.lExtRelX},rs=(e,n,t,r)=>{const i=e.children[n],o=i.rExt,s=e.children[n-1];o.rThr=t;const a=r-t.relX-i.rExtRelX;o.relX+=a,o.prelim-=a,i.rExt=s.rExt,i.rExtRelX=s.rExtRelX},is=e=>{if(e.hasChildren){const n=e.firstChild,t=e.lastChild,r=(n.prelim+n.relX-n.xSize/2+t.relX+t.prelim+t.xSize/2)/2;Object.assign(e,{prelim:r,lExt:n.lExt,lExtRelX:n.lExtRelX,rExt:t.rExt,rExtRelX:t.rExtRelX})}},os=(e,n,t)=>{for(;t!==null&&e>=t.lowY;)t=t.next;return{lowY:e,index:n,next:t}};function Ye(e){return function(){return e}}const se=Math.PI,le=2*se,et=1e-6,as=le-et;function xn(e){this._+=e[0];for(let n=1,t=e.length;n<t;++n)this._+=arguments[n]+e[n]}function ss(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return xn;const t=10**n;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class ls{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?xn:ss(n)}moveTo(n,t){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,t){this._append`L${this._x1=+n},${this._y1=+t}`}quadraticCurveTo(n,t,r,i){this._append`Q${+n},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,t,r,i,o,s){this._append`C${+n},${+t},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(n,t,r,i,o){if(n=+n,t=+t,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=r-n,l=i-t,u=s-n,f=a-t,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=n},${this._y1=t}`;else if(d>et)if(!(Math.abs(f*c-l*u)>et)||!o)this._append`L${this._x1=n},${this._y1=t}`;else{let p=r-s,y=i-a,x=c*c+l*l,C=p*p+y*y,_=Math.sqrt(x),$=Math.sqrt(d),S=o*Math.tan((se-Math.acos((x+d-C)/(2*_*$)))/2),k=S/$,M=S/_;Math.abs(k-1)>et&&this._append`L${n+k*u},${t+k*f}`,this._append`A${o},${o},0,0,${+(f*p>u*y)},${this._x1=n+M*c},${this._y1=t+M*l}`}}arc(n,t,r,i,o,s){if(n=+n,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),l=n+a,u=t+c,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>et||Math.abs(this._y1-u)>et)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%le+le),d>as?this._append`A${r},${r},0,1,${f},${n-a},${t-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>et&&this._append`A${r},${r},0,${+(d>=se)},${f},${this._x1=n+r*Math.cos(o)},${this._y1=t+r*Math.sin(o)}`)}rect(n,t,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function cs(e){let n=3;return e.digits=function(t){if(!arguments.length)return n;if(t==null)n=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);n=r}return e},()=>new ls(n)}var us=Array.prototype.slice;function hs(e){return e[0]}function fs(e){return e[1]}class ds{constructor(n,t){this._context=n,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,t){switch(n=+n,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,t,n,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,n,this._y0,n,t);break}}this._x0=n,this._y0=t}}function ps(e){return new ds(e,!0)}function gs(e){return e.source}function ms(e){return e.target}function xs(e){let n=gs,t=ms,r=hs,i=fs,o=null,s=null,a=cs(c);function c(){let l;const u=us.call(arguments),f=n.apply(this,u),d=t.apply(this,u);if(o==null&&(s=e(l=a())),s.lineStart(),u[0]=f,s.point(+r.apply(this,u),+i.apply(this,u)),u[0]=d,s.point(+r.apply(this,u),+i.apply(this,u)),s.lineEnd(),l)return s=null,l+""||null}return c.source=function(l){return arguments.length?(n=l,c):n},c.target=function(l){return arguments.length?(t=l,c):t},c.x=function(l){return arguments.length?(r=typeof l=="function"?l:Ye(+l),c):r},c.y=function(l){return arguments.length?(i=typeof l=="function"?l:Ye(+l),c):i},c.context=function(l){return arguments.length?(l==null?o=s=null:s=e(o=l),c):o},c}function ys(){return xs(ps)}const z={selection:ct,select:P,max:jr,min:ti,sum:ei,cumsum:Qr,tree:Ti,stratify:Ei,zoom:Na,zoomIdentity:me,linkHorizontal:ys,flextree:ye};class _s{constructor(){const n={id:`ID${Math.floor(Math.random()*1e6)}`,firstDraw:!0,ctx:document.createElement("canvas").getContext("2d"),initialExpandLevel:1,nodeDefaultBackground:"none",lastTransform:{x:0,y:0,k:1},allowedNodesCount:{},zoomBehavior:null,generateRoot:null,svgWidth:800,svgHeight:window.innerHeight-100,container:"body",data:null,connections:[],defaultFont:"Helvetica",nodeId:t=>t.nodeId||t.id,parentNodeId:t=>t.parentNodeId||t.parentId,rootMargin:40,nodeWidth:t=>250,nodeHeight:t=>150,neighbourMargin:(t,r)=>80,siblingsMargin:t=>20,childrenMargin:t=>60,compactMarginPair:t=>100,compactMarginBetween:(t=>20),nodeButtonWidth:t=>40,nodeButtonHeight:t=>40,nodeButtonX:t=>-20,nodeButtonY:t=>-20,linkYOffset:30,pagingStep:t=>5,minPagingVisibleNodes:t=>2e3,scaleExtent:[.001,20],duration:400,imageName:"Chart",setActiveNodeCentered:!0,layout:"top",compact:!0,createZoom:t=>z.zoom(),onZoomStart:t=>{},onZoom:t=>{},onZoomEnd:t=>{},onNodeClick:t=>t,onExpandOrCollapse:t=>t,nodeContent:t=>`<div style="padding:5px;font-size:10px;">Sample Node(id=${t.id}), override using <br/> 
            <code>chart.nodeContent({data}=>{ <br/>
             &nbsp;&nbsp;&nbsp;&nbsp;return '' // Custom HTML <br/>
             })</code>
             <br/> 
             Or check different <a href="https://github.com/bumbeishvili/org-chart#jump-to-examples" target="_blank">layout examples</a>
             </div>`,buttonContent:({node:t,state:r})=>`<div style="border:1px solid #E4E2E9;border-radius:3px;padding:3px;font-size:9px;margin:auto auto;background-color:white"> ${{left:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z" fill="#716E7B" stroke="#716E7B"/>
                      </svg></span><span style="color:#716E7B">${t.data._directSubordinatesPaging} </span></div>`:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z" fill="#716E7B" stroke="#716E7B"/>
                          </svg></span><span style="color:#716E7B">${t.data._directSubordinatesPaging} </span></div>`,bottom:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="margin-left:1px;color:#716E7B" >${t.data._directSubordinatesPaging} </span></div>
                       `:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="margin-left:1px;color:#716E7B" >${t.data._directSubordinatesPaging} </span></div>
                    `,right:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="color:#716E7B">${t.data._directSubordinatesPaging} </span></div>`:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="color:#716E7B">${t.data._directSubordinatesPaging} </span></div>`,top:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z" fill="#716E7B" stroke="#716E7B"/>
                        </svg></span><span style="margin-left:1px;color:#716E7B">${t.data._directSubordinatesPaging} </span></div>
                        `:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z" fill="#716E7B" stroke="#716E7B"/>
                        </svg></span><span style="margin-left:1px;color:#716E7B">${t.data._directSubordinatesPaging} </span></div>
                    `}[r.layout](t.children)}  </div>`,pagingButton:(t,r,i,o)=>{const s=o.pagingStep(t.parent),a=t.parent.data._pagingStep,c=t.parent.data._directSubordinatesPaging-a;return`
                   <div style="margin-top:90px;">
                      <div style="display:flex;width:170px;border-radius:20px;padding:5px 15px; padding-bottom:4px;;background-color:#E5E9F2">
                      <div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M5.59 7.41L10.18 12L5.59 16.59L7 18L13 12L7 6L5.59 7.41ZM16 6H18V18H16V6Z" fill="#716E7B" stroke="#716E7B"/>
                      </svg>
                      </div><div style="line-height:2"> Show next ${Math.min(c,s)}  nodes </div></div>
                   </div>
                `},nodeUpdate:function(t,r,i){z.select(this).select(".node-rect").attr("stroke",o=>o.data._highlighted||o.data._upToTheRootHighlighted?"#E27396":"none").attr("stroke-width",t.data._highlighted||t.data._upToTheRootHighlighted?10:1)},nodeEnter:t=>t,nodeExit:t=>t,linkUpdate:function(t,r,i){z.select(this).attr("stroke",o=>o.data._upToTheRootHighlighted?"#E27396":"#E4E2E9").attr("stroke-width",o=>o.data._upToTheRootHighlighted?5:1),t.data._upToTheRootHighlighted&&z.select(this).raise()},hdiagonal:function(t,r,i){const o=t.x,s=t.y,a=r.x,c=r.y;let l=i&&i.x!=null?i.x:o,u=i&&i.y!=null?i.y:s,f=a-o<0?-1:1,d=c-s<0?-1:1,p=35,y=Math.abs(a-o)/2<p?Math.abs(a-o)/2:p;y=Math.abs(c-s)/2<y?Math.abs(c-s)/2:y;let x=Math.abs(a-o)/2-y;return`
                          M ${l} ${u}
                          L ${l} ${s}
                          L ${o} ${s}
                          L ${o+x*f} ${s}
                          C ${o+x*f+y*f} ${s} 
                            ${o+x*f+y*f} ${s} 
                            ${o+x*f+y*f} ${s+y*d}
                          L ${o+x*f+y*f} ${c-y*d} 
                          C ${o+x*f+y*f}  ${c} 
                            ${o+x*f+y*f}  ${c} 
                            ${a-x*f}  ${c}
                          L ${a} ${c}
               `},diagonal:function(t,r,i,o={sy:0}){const s=t.x;let a=t.y;const c=r.x,l=r.y;let u=i&&i.x!=null?i.x:s,f=i&&i.y!=null?i.y:a,d=c-s<0?-1:1,p=l-a<0?-1:1;a+=o.sy;let y=35,x=Math.abs(c-s)/2<y?Math.abs(c-s)/2:y;x=Math.abs(l-a)/2<x?Math.abs(l-a)/2:x;let C=Math.abs(l-a)/2-x,_=Math.abs(c-s)-x*2;return`
                          M ${u} ${f}
                          L ${s} ${f}
                          L ${s} ${a}
                          L ${s} ${a+C*p}
                          C  ${s} ${a+C*p+x*p} ${s} ${a+C*p+x*p} ${s+x*d} ${a+C*p+x*p}
                          L ${s+_*d+x*d} ${a+C*p+x*p}
                          C  ${c}  ${a+C*p+x*p} ${c}  ${a+C*p+x*p} ${c} ${l-C*p}
                          L ${c} ${l}
               `},defs:function(t,r){return`<defs>
                    ${r.map(i=>{const o=this.getTextWidth(i.label,{ctx:t.ctx,fontSize:2,defaultFont:t.defaultFont});return`
                       <marker id="${i.from+"_"+i.to}" refX="${i._source.x<i._target.x?-7:7}" refY="5" markerWidth="500"  markerHeight="500"  orient="${i._source.x<i._target.x?"auto":"auto-start-reverse"}" >
                       <rect rx=0.5 width=${i.label?o+3:0} height=3 y=1  fill="#E27396"></rect>
                       <text font-size="2px" x=1 fill="white" y=3>${i.label||""}</text>
                       </marker>

                       <marker id="arrow-${i.from+"_"+i.to}"  markerWidth="500"  markerHeight="500"  refY="2"  refX="1" orient="${i._source.x<i._target.x?"auto":"auto-start-reverse"}" >
                       <path transform="translate(0)" d='M0,0 V4 L2,2 Z' fill='#E27396' />
                       </marker>
                    `}).join("")}
                    </defs>
                    `},connectionsUpdate:function(t,r,i){z.select(this).attr("stroke",o=>"#E27396").attr("stroke-linecap","round").attr("stroke-width",o=>"5").attr("pointer-events","none").attr("marker-start",o=>`url(#${o.from+"_"+o.to})`).attr("marker-end",o=>`url(#arrow-${o.from+"_"+o.to})`)},linkGroupArc:z.linkHorizontal().x(t=>t.x).y(t=>t.y),layoutBindings:{left:{nodeLeftX:t=>0,nodeRightX:t=>t.width,nodeTopY:t=>-t.height/2,nodeBottomY:t=>t.height/2,nodeJoinX:t=>t.x+t.width,nodeJoinY:t=>t.y-t.height/2,linkJoinX:t=>t.x+t.width,linkJoinY:t=>t.y,linkX:t=>t.x,linkY:t=>t.y,linkCompactXStart:t=>t.x+t.width/2,linkCompactYStart:t=>t.y+(t.compactEven?t.height/2:-t.height/2),compactLinkMidX:(t,r)=>t.firstCompactNode.x,compactLinkMidY:(t,r)=>t.firstCompactNode.y+t.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(t)/4,linkParentX:t=>t.parent.x+t.parent.width,linkParentY:t=>t.parent.y,buttonX:t=>t.width,buttonY:t=>t.height/2,centerTransform:({root:t,rootMargin:r,centerY:i,scale:o,centerX:s})=>`translate(${r},${i}) scale(${o})`,compactDimension:{sizeColumn:t=>t.height,sizeRow:t=>t.width,reverse:t=>t.slice().reverse()},nodeFlexSize:({height:t,width:r,siblingsMargin:i,childrenMargin:o,state:s,node:a})=>s.compact&&a.flexCompactDim?[a.flexCompactDim[0],a.flexCompactDim[1]]:[t+i,r+o],zoomTransform:({centerY:t,scale:r})=>`translate(0,${t}) scale(${r})`,diagonal:this.hdiagonal.bind(this),swap:t=>{const r=t.x;t.x=t.y,t.y=r},nodeUpdateTransform:({x:t,y:r,width:i,height:o})=>`translate(${t},${r-o/2})`},top:{nodeLeftX:t=>-t.width/2,nodeRightX:t=>t.width/2,nodeTopY:t=>0,nodeBottomY:t=>t.height,nodeJoinX:t=>t.x-t.width/2,nodeJoinY:t=>t.y+t.height,linkJoinX:t=>t.x,linkJoinY:t=>t.y+t.height,linkCompactXStart:t=>t.x+(t.compactEven?t.width/2:-t.width/2),linkCompactYStart:t=>t.y+t.height/2,compactLinkMidX:(t,r)=>t.firstCompactNode.x+t.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(t)/4,compactLinkMidY:t=>t.firstCompactNode.y,compactDimension:{sizeColumn:t=>t.width,sizeRow:t=>t.height,reverse:t=>t},linkX:t=>t.x,linkY:t=>t.y,linkParentX:t=>t.parent.x,linkParentY:t=>t.parent.y+t.parent.height,buttonX:t=>t.width/2,buttonY:t=>t.height,centerTransform:({root:t,rootMargin:r,centerY:i,scale:o,centerX:s})=>`translate(${s},${r}) scale(${o})`,nodeFlexSize:({height:t,width:r,siblingsMargin:i,childrenMargin:o,state:s,node:a,compactViewIndex:c})=>s.compact&&a.flexCompactDim?[a.flexCompactDim[0],a.flexCompactDim[1]]:[r+i,t+o],zoomTransform:({centerX:t,scale:r})=>`translate(${t},0}) scale(${r})`,diagonal:this.diagonal.bind(this),swap:t=>{},nodeUpdateTransform:({x:t,y:r,width:i,height:o})=>`translate(${t-i/2},${r})`},bottom:{nodeLeftX:t=>-t.width/2,nodeRightX:t=>t.width/2,nodeTopY:t=>-t.height,nodeBottomY:t=>0,nodeJoinX:t=>t.x-t.width/2,nodeJoinY:t=>t.y-t.height-t.height,linkJoinX:t=>t.x,linkJoinY:t=>t.y-t.height,linkCompactXStart:t=>t.x+(t.compactEven?t.width/2:-t.width/2),linkCompactYStart:t=>t.y-t.height/2,compactLinkMidX:(t,r)=>t.firstCompactNode.x+t.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(t)/4,compactLinkMidY:t=>t.firstCompactNode.y,linkX:t=>t.x,linkY:t=>t.y,compactDimension:{sizeColumn:t=>t.width,sizeRow:t=>t.height,reverse:t=>t},linkParentX:t=>t.parent.x,linkParentY:t=>t.parent.y-t.parent.height,buttonX:t=>t.width/2,buttonY:t=>0,centerTransform:({root:t,rootMargin:r,centerY:i,scale:o,centerX:s,chartHeight:a})=>`translate(${s},${a-r}) scale(${o})`,nodeFlexSize:({height:t,width:r,siblingsMargin:i,childrenMargin:o,state:s,node:a})=>s.compact&&a.flexCompactDim?[a.flexCompactDim[0],a.flexCompactDim[1]]:[r+i,t+o],zoomTransform:({centerX:t,scale:r})=>`translate(${t},0}) scale(${r})`,diagonal:this.diagonal.bind(this),swap:t=>{t.y=-t.y},nodeUpdateTransform:({x:t,y:r,width:i,height:o})=>`translate(${t-i/2},${r-o})`},right:{nodeLeftX:t=>-t.width,nodeRightX:t=>0,nodeTopY:t=>-t.height/2,nodeBottomY:t=>t.height/2,nodeJoinX:t=>t.x-t.width-t.width,nodeJoinY:t=>t.y-t.height/2,linkJoinX:t=>t.x-t.width,linkJoinY:t=>t.y,linkX:t=>t.x,linkY:t=>t.y,linkParentX:t=>t.parent.x-t.parent.width,linkParentY:t=>t.parent.y,buttonX:t=>0,buttonY:t=>t.height/2,linkCompactXStart:t=>t.x-t.width/2,linkCompactYStart:t=>t.y+(t.compactEven?t.height/2:-t.height/2),compactLinkMidX:(t,r)=>t.firstCompactNode.x,compactLinkMidY:(t,r)=>t.firstCompactNode.y+t.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(t)/4,centerTransform:({root:t,rootMargin:r,centerY:i,scale:o,centerX:s,chartWidth:a})=>`translate(${a-r},${i}) scale(${o})`,nodeFlexSize:({height:t,width:r,siblingsMargin:i,childrenMargin:o,state:s,node:a})=>s.compact&&a.flexCompactDim?[a.flexCompactDim[0],a.flexCompactDim[1]]:[t+i,r+o],compactDimension:{sizeColumn:t=>t.height,sizeRow:t=>t.width,reverse:t=>t.slice().reverse()},zoomTransform:({centerY:t,scale:r})=>`translate(0,${t}) scale(${r})`,diagonal:this.hdiagonal.bind(this),swap:t=>{const r=t.x;t.x=-t.y,t.y=r},nodeUpdateTransform:({x:t,y:r,width:i,height:o})=>`translate(${t-i},${r-o/2})`}}};this.getChartState=()=>n,Object.keys(n).forEach(t=>{this[t]=function(r){if(arguments.length)n[t]=r;else return n[t];return this}}),this.initializeEnterExitUpdatePattern()}initializeEnterExitUpdatePattern(){z.selection.prototype.patternify=function(n){var t=this,r=n.selector,i=n.tag,o=n.data||[r],s=t.selectAll("."+r).data(o,(a,c)=>typeof a=="object"&&a.id?a.id:c);return s.exit().remove(),s=s.enter().append(i).merge(s),s.attr("class",r),s}}getNodeChildren({data:n,children:t,_children:r},i){return i.push(n),t&&t.forEach(o=>{this.getNodeChildren(o,i)}),r&&r.forEach(o=>{this.getNodeChildren(o,i)}),i}initialZoom(n){const t=this.getChartState();return t.lastTransform.k=n,this}render(){const n=this.getChartState();if(!n.data||n.data.length==0)return console.log("ORG CHART - Data is empty"),n.container&&(P(n.container).select(".nodes-wrapper").remove(),P(n.container).select(".links-wrapper").remove(),P(n.container).select(".connections-wrapper").remove()),this;const t=z.select(n.container),r=t.node().getBoundingClientRect();r.width>0&&(n.svgWidth=r.width);const i={id:`ID${Math.floor(Math.random()*1e6)}`,chartWidth:n.svgWidth,chartHeight:n.svgHeight};if(n.calc=i,i.centerX=i.chartWidth/2,i.centerY=i.chartHeight/2,n.firstDraw){const a={zoom:null};a.zoom=n.createZoom().clickDistance(10).on("start",(c,l)=>n.onZoomStart(c)).on("end",(c,l)=>n.onZoomEnd(c)).on("zoom",(c,l)=>{n.onZoom(c),this.zoomed(c,l)}).scaleExtent(n.scaleExtent),n.zoomBehavior=a.zoom}n.flexTreeLayout=ye({nodeSize:a=>{const c=n.nodeWidth(a),l=n.nodeHeight(a),u=n.siblingsMargin(a),f=n.childrenMargin(a);return n.layoutBindings[n.layout].nodeFlexSize({state:n,node:a,width:c,height:l,siblingsMargin:u,childrenMargin:f})}}).spacing((a,c)=>a.parent==c.parent?0:n.neighbourMargin(a,c)),this.setLayouts({expandNodesFirst:!1});const o=t.patternify({tag:"svg",selector:"svg-chart-container"}).attr("width",n.svgWidth).attr("height",n.svgHeight).attr("font-family",n.defaultFont);n.firstDraw&&o.call(n.zoomBehavior).on("dblclick.zoom",null).attr("cursor","move"),n.svg=o;const s=o.patternify({tag:"g",selector:"chart"});return n.centerG=s.patternify({tag:"g",selector:"center-group"}),n.linksWrapper=n.centerG.patternify({tag:"g",selector:"links-wrapper"}),n.nodesWrapper=n.centerG.patternify({tag:"g",selector:"nodes-wrapper"}),n.connectionsWrapper=n.centerG.patternify({tag:"g",selector:"connections-wrapper"}),n.defsWrapper=o.patternify({tag:"g",selector:"defs-wrapper"}),n.firstDraw&&n.centerG.attr("transform",()=>n.layoutBindings[n.layout].centerTransform({centerX:i.centerX,centerY:i.centerY,scale:n.lastTransform.k,rootMargin:n.rootMargin,root:n.root,chartHeight:i.chartHeight,chartWidth:i.chartWidth})),n.chart=s,this.update(n.root),z.select(window).on(`resize.${n.id}`,()=>{const a=z.select(n.container).node().getBoundingClientRect();n.svg.attr("width",a.width)}),n.firstDraw&&(n.firstDraw=!1),this}addNode(n){const t=this.getChartState();if(n&&(t.parentNodeId(n)==null||t.parentNodeId(n)==t.nodeId(n))&&t.data.length==0)return t.data.push(n),this.render(),this;const i=t.generateRoot(t.data).descendants(),o=i.filter(({data:s})=>t.nodeId(s).toString()===t.nodeId(n).toString())[0];return i.filter(({data:s})=>t.nodeId(s).toString()===t.parentNodeId(n).toString())[0],o?(console.log(`ORG CHART - ADD - Node with id "${t.nodeId(n)}" already exists in tree`),this):(n._centered&&!n._expanded&&(n._expanded=!0),t.data.push(n),this.updateNodesState(),this)}removeNode(n){const t=this.getChartState(),o=t.generateRoot(t.data).descendants().filter(({data:a})=>t.nodeId(a)==n)[0];return o?(o.descendants().forEach(a=>a.data._filteredOut=!0),t.data=t.data.filter(a=>!a._filteredOut),t.data.length==0?this.render():this.updateNodesState.bind(this)(),this):(console.log(`ORG CHART - REMOVE - Node with id "${n}" not found in the tree`),this)}groupBy(n,t,r){const i={};return n.forEach(o=>{const s=t(o);i[s]||(i[s]=[]),i[s].push(o)}),Object.keys(i).forEach(o=>{i[o]=r(i[o])}),Object.entries(i)}calculateCompactFlexDimensions(n){const t=this.getChartState();n.eachBefore(r=>{r.firstCompact=null,r.compactEven=null,r.flexCompactDim=null,r.firstCompactNode=null}),n.eachBefore(r=>{if(r.children&&r.children.length>1){const i=r.children.filter(u=>!u.children);if(i.length<2)return;i.forEach((u,f)=>{f||(u.firstCompact=!0),f%2?u.compactEven=!1:u.compactEven=!0,u.row=Math.floor(f/2)});const o=z.max(i.filter(u=>u.compactEven),t.layoutBindings[t.layout].compactDimension.sizeColumn),s=z.max(i.filter(u=>!u.compactEven),t.layoutBindings[t.layout].compactDimension.sizeColumn),a=Math.max(o,s)*2,c=this.groupBy(i,u=>u.row,u=>z.max(u,f=>t.layoutBindings[t.layout].compactDimension.sizeRow(f)+t.compactMarginBetween(f))),l=z.sum(c.map(u=>u[1]));i.forEach(u=>{u.firstCompactNode=i[0],u.firstCompact?u.flexCompactDim=[a+t.compactMarginPair(u),l-t.compactMarginBetween(u)]:u.flexCompactDim=[0,0]}),r.flexCompactDim=null}})}calculateCompactFlexPositions(n){const t=this.getChartState();n.eachBefore(r=>{if(r.children){const i=r.children.filter(u=>u.flexCompactDim),o=i[0];if(!o)return;i.forEach((u,f,d)=>{f==0&&(o.x-=o.flexCompactDim[0]/2),f&f%2-1?u.x=o.x+o.flexCompactDim[0]*.25-t.compactMarginPair(u)/4:f&&(u.x=o.x+o.flexCompactDim[0]*.75+t.compactMarginPair(u)/4)});const s=o.x+o.flexCompactDim[0]*.5;o.x=o.x+o.flexCompactDim[0]*.25-t.compactMarginPair(o)/4;const a=r.x-s;Math.abs(a)<10&&i.forEach(u=>u.x+=a);const c=this.groupBy(i,u=>u.row,u=>z.max(u,f=>t.layoutBindings[t.layout].compactDimension.sizeRow(f))),l=z.cumsum(c.map(u=>u[1]+t.compactMarginBetween(u)));i.forEach((u,f)=>{u.row?u.y=o.y+l[u.row-1]:u.y=o.y})}})}update({x0:n,y0:t,x:r=0,y:i=0,width:o,height:s}){const a=this.getChartState();a.calc,a.compact&&this.calculateCompactFlexDimensions(a.root);const c=a.flexTreeLayout(a.root);a.compact&&this.calculateCompactFlexPositions(a.root);const l=c.descendants(),u=c.descendants().slice(1);l.forEach(a.layoutBindings[a.layout].swap);const f=a.connections,d={};a.allNodes.forEach(h=>d[a.nodeId(h.data)]=h);const p={};l.forEach(h=>p[a.nodeId(h.data)]=h),f.forEach(h=>{const m=d[h.from],w=d[h.to];h._source=m,h._target=w});const y=f.filter(h=>p[h.from]&&p[h.to]),x=a.defs.bind(this)(a,y),C=a.defsWrapper.html();x!==C&&a.defsWrapper.html(x);const _=a.linksWrapper.selectAll("path.link").data(u,h=>a.nodeId(h.data)),S=_.enter().insert("path","g").attr("class","link").attr("d",h=>{const m=a.layoutBindings[a.layout].linkJoinX({x:n,y:t,width:o,height:s}),w=a.layoutBindings[a.layout].linkJoinY({x:n,y:t,width:o,height:s}),v={x:m,y:w};return a.layoutBindings[a.layout].diagonal(v,v,v)}).merge(_);S.attr("fill","none"),this.isEdge()?S.style("display",h=>h.data._pagingButton?"none":"auto"):S.attr("display",h=>h.data._pagingButton?"none":"auto"),S.each(a.linkUpdate),S.transition().duration(a.duration).attr("d",h=>{const m=a.compact&&h.flexCompactDim?{x:a.layoutBindings[a.layout].compactLinkMidX(h,a),y:a.layoutBindings[a.layout].compactLinkMidY(h,a)}:{x:a.layoutBindings[a.layout].linkX(h),y:a.layoutBindings[a.layout].linkY(h)},w={x:a.layoutBindings[a.layout].linkParentX(h),y:a.layoutBindings[a.layout].linkParentY(h)},v=a.compact&&h.flexCompactDim?{x:a.layoutBindings[a.layout].linkCompactXStart(h),y:a.layoutBindings[a.layout].linkCompactYStart(h)}:m;return a.layoutBindings[a.layout].diagonal(m,w,v,{sy:a.linkYOffset})}),_.exit().transition().duration(a.duration).attr("d",h=>{const m=a.layoutBindings[a.layout].linkJoinX({x:r,y:i,width:o,height:s}),w=a.layoutBindings[a.layout].linkJoinY({x:r,y:i,width:o,height:s}),v={x:m,y:w};return a.layoutBindings[a.layout].diagonal(v,v,null,{sy:a.linkYOffset})}).remove();const k=a.connectionsWrapper.selectAll("path.connection").data(y),A=k.enter().insert("path","g").attr("class","connection").attr("d",h=>{const m=a.layoutBindings[a.layout].linkJoinX({x:n,y:t,width:o,height:s}),w=a.layoutBindings[a.layout].linkJoinY({x:n,y:t,width:o,height:s}),v={x:m,y:w};return a.layoutBindings[a.layout].diagonal(v,v,null,{sy:a.linkYOffset})}).merge(k);A.attr("fill","none"),A.transition().duration(a.duration).attr("d",h=>{const m=a.layoutBindings[a.layout].linkX({x:h._source.x,y:h._source.y,width:h._source.width,height:h._source.height}),w=a.layoutBindings[a.layout].linkY({x:h._source.x,y:h._source.y,width:h._source.width,height:h._source.height}),v=a.layoutBindings[a.layout].linkJoinX({x:h._target.x,y:h._target.y,width:h._target.width,height:h._target.height}),b=a.layoutBindings[a.layout].linkJoinY({x:h._target.x,y:h._target.y,width:h._target.width,height:h._target.height});return a.linkGroupArc({source:{x:m,y:w},target:{x:v,y:b}})}),A.each(a.connectionsUpdate),k.exit().transition().duration(a.duration).attr("opacity",0).remove();const R=a.nodesWrapper.selectAll("g.node").data(l,({data:h})=>a.nodeId(h)),U=R.enter().append("g").attr("class","node").attr("transform",h=>{if(h==a.root)return`translate(${n},${t})`;const m=a.layoutBindings[a.layout].nodeJoinX({x:n,y:t,width:o,height:s}),w=a.layoutBindings[a.layout].nodeJoinY({x:n,y:t,width:o,height:s});return`translate(${m},${w})`}).attr("cursor","pointer").on("click.node",(h,m)=>{const{data:w}=m;if(![...h.srcElement.classList].includes("node-button-foreign-object")){if([...h.srcElement.classList].includes("paging-button-wrapper")){this.loadPagingNodes(m);return}if(!w._pagingButton){a.onNodeClick(m);return}console.log("event fired, no handlers")}}).on("keydown.node",(h,m)=>{const{data:w}=m;if(h.key==="Enter"||h.key===" "||h.key==="Spacebar"){if([...h.srcElement.classList].includes("node-button-foreign-object"))return;if([...h.srcElement.classList].includes("paging-button-wrapper")){this.loadPagingNodes(m);return}(h.key==="Enter"||h.key===" "||h.key==="Spacebar")&&this.onButtonClick(h,m)}});U.each(a.nodeEnter),U.patternify({tag:"rect",selector:"node-rect",data:h=>[h]});const I=U.merge(R).style("font","12px sans-serif");I.patternify({tag:"foreignObject",selector:"node-foreign-object",data:h=>[h]}).style("overflow","visible").patternify({tag:"xhtml:div",selector:"node-foreign-object-div",data:h=>[h]}),this.restyleForeignObjectElements();const vt=U.patternify({tag:"g",selector:"node-button-g",data:h=>[h]}).on("click",(h,m)=>this.onButtonClick(h,m)).on("keydown",(h,m)=>{(h.key==="Enter"||h.key===" "||h.key==="Spacebar")&&this.onButtonClick(h,m)});vt.patternify({tag:"rect",selector:"node-button-rect",data:h=>[h]}).attr("opacity",0).attr("pointer-events","all").attr("width",h=>a.nodeButtonWidth(h)).attr("height",h=>a.nodeButtonHeight(h)).attr("x",h=>a.nodeButtonX(h)).attr("y",h=>a.nodeButtonY(h)),vt.patternify({tag:"foreignObject",selector:"node-button-foreign-object",data:h=>[h]}).attr("width",h=>a.nodeButtonWidth(h)).attr("height",h=>a.nodeButtonHeight(h)).attr("x",h=>a.nodeButtonX(h)).attr("y",h=>a.nodeButtonY(h)).style("overflow","visible").patternify({tag:"xhtml:div",selector:"node-button-div",data:h=>[h]}).style("pointer-events","none").style("display","flex").style("width","100%").style("height","100%"),I.transition().attr("opacity",0).duration(a.duration).attr("transform",({x:h,y:m,width:w,height:v})=>a.layoutBindings[a.layout].nodeUpdateTransform({x:h,y:m,width:w,height:v})).attr("opacity",1),I.select(".node-rect").attr("width",({width:h})=>h).attr("height",({height:h})=>h).attr("x",({width:h})=>0).attr("y",({height:h})=>0).attr("cursor","pointer").attr("rx",3).attr("fill",a.nodeDefaultBackground),I.select(".node-button-g").attr("transform",({data:h,width:m,height:w})=>{const v=a.layoutBindings[a.layout].buttonX({width:m,height:w}),b=a.layoutBindings[a.layout].buttonY({width:m,height:w});return`translate(${v},${b})`}).attr("display",({data:h})=>h._directSubordinates>0?null:"none").attr("opacity",({data:h,children:m,_children:w})=>h._pagingButton?0:m||w?1:0),I.select(".node-button-foreign-object .node-button-div").html(h=>a.buttonContent({node:h,state:a})),I.select(".node-button-text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size",({children:h})=>h?40:26).text(({children:h})=>h?"-":"+").attr("y",this.isEdge()?10:0),I.each(a.nodeUpdate);const ht=R.exit();ht.each(a.nodeExit);const Pt=ht.data().reduce((h,m)=>h.depth<m.depth?h:m,{depth:1/0});ht.attr("opacity",1).transition().duration(a.duration).attr("transform",h=>{let{x:m,y:w,width:v,height:b}=Pt.parent||{};const E=a.layoutBindings[a.layout].nodeJoinX({x:m,y:w,width:v,height:b}),N=a.layoutBindings[a.layout].nodeJoinY({x:m,y:w,width:v,height:b});return`translate(${E},${N})`}).on("end",function(){z.select(this).remove()}).attr("opacity",0),l.forEach(h=>{h.x0=h.x,h.y0=h.y});const g=a.allNodes.filter(h=>h.data._centered)[0];if(g){let h=[g];g.data._centeredWithDescendants&&(a.compact?h=g.descendants().filter((m,w)=>w<7):h=g.descendants().filter((m,w,v)=>{const b=Math.round(v.length/2),E=2;return v.length%2?w>b-E&&w<b+E-1:w>b-E&&w<b+E})),g.data._centeredWithDescendants=null,g.data._centered=null,this.fit({animate:!0,scale:!1,nodes:h})}}isEdge(){return window.navigator.userAgent.includes("Edge")}hdiagonal(n,t,r,i){return this.getChartState().hdiagonal(n,t,r,i)}diagonal(n,t,r,i){return this.getChartState().diagonal(n,t,r,i)}restyleForeignObjectElements(){const n=this.getChartState();n.svg.selectAll(".node-foreign-object").attr("width",({width:t})=>t).attr("height",({height:t})=>t).attr("x",({width:t})=>0).attr("y",({height:t})=>0),n.svg.selectAll(".node-foreign-object-div").style("width",({width:t})=>`${t}px`).style("height",({height:t})=>`${t}px`).html(function(t,r,i){return t.data._pagingButton?`<div class="paging-button-wrapper"><div style="pointer-events:none">${n.pagingButton(t,r,i,n)}</div></div>`:n.nodeContent.bind(this)(t,r,i,n)})}onButtonClick(n,t){const r=this.getChartState();t.data._pagingButton||(r.setActiveNodeCentered&&(t.data._centered=!0,t.data._centeredWithDescendants=!0),t.children?(t._children=t.children,t.children=null,this.setExpansionFlagToChildren(t,!1)):(t.children=t._children,t._children=null,t.children&&t.children.forEach(({data:i})=>i._expanded=!0)),this.update(t),n.stopPropagation(),r.onExpandOrCollapse(t))}setExpansionFlagToChildren({data:n,children:t,_children:r},i){n._expanded=i,t&&t.forEach(o=>{this.setExpansionFlagToChildren(o,i)}),r&&r.forEach(o=>{this.setExpansionFlagToChildren(o,i)})}expandSomeNodes(n){if(n.data._expanded){let t=n.parent;for(;t&&t._children;)t.children=t._children,t._children=null,t=t.parent}n._children&&n._children.forEach(t=>this.expandSomeNodes(t)),n.children&&n.children.forEach(t=>this.expandSomeNodes(t))}updateNodesState(){const n=this.getChartState();this.setLayouts({expandNodesFirst:!0}),this.update(n.root)}setLayouts({expandNodesFirst:n=!0}){const t=this.getChartState();t.generateRoot=z.stratify().id(o=>t.nodeId(o)).parentId(o=>t.parentNodeId(o)),t.root=t.generateRoot(t.data);const r=t.root.descendants();t.initialExpandLevel>1&&r.length>0&&(r.forEach(o=>{o.depth<=t.initialExpandLevel&&(o.data._expanded=!0)}),t.initialExpandLevel=1);const i={};t.root.descendants().filter(o=>o.children).filter(o=>!o.data._pagingStep).forEach(o=>{o.data._pagingStep=t.minPagingVisibleNodes(o)}),t.root.eachBefore((o,s)=>{o.data._directSubordinatesPaging=o.children?o.children.length:0,o.children&&o.children.forEach((a,c)=>{if(a.data._pagingButton=!1,c>o.data._pagingStep&&(i[a.id]=!0),c===o.data._pagingStep&&o.children.length-1>o.data._pagingStep&&(a.data._pagingButton=!0),i[a.parent.id]&&(i[a.id]=!0),a.data._expanded||a.data._centered||a.data._highlighted||a.data._upToTheRootHighlighted){let l=a;for(;l&&(i[l.id]||l.data._pagingButton);)i[l.id]=!1,l.data._pagingButton&&(l.data._pagingButton=!1,l.parent.children.forEach(u=>{u.data._expanded=!0,i[u.id]=!1})),l=l.parent}})}),t.root=z.stratify().id(o=>t.nodeId(o)).parentId(o=>t.parentNodeId(o))(t.data.filter(o=>i[o.id]!==!0)),t.root.each((o,s,a)=>{let c=o._hierarchyHeight||o.height,l=t.nodeWidth(o),u=t.nodeHeight(o);Object.assign(o,{width:l,height:u,_hierarchyHeight:c})}),t.root.x0=0,t.root.y0=0,t.allNodes=t.root.descendants(),t.allNodes.forEach(o=>{Object.assign(o.data,{_directSubordinates:o.children?o.children.length:0,_totalSubordinates:o.descendants().length-1})}),t.root.children&&(n&&t.root.children.forEach(this.expand),t.root.children.forEach(o=>this.collapse(o)),t.initialExpandLevel==0&&(t.root._children=t.root.children,t.root.children=null),[t.root].forEach(o=>this.expandSomeNodes(o)))}collapse(n){n.children&&(n._children=n.children,n._children.forEach(t=>this.collapse(t)),n.children=null)}expand(n){n._children&&(n.children=n._children,n.children.forEach(t=>this.expand(t)),n._children=null)}zoomed(n,t){const r=this.getChartState(),i=r.chart,o=n.transform;r.lastTransform=o,i.attr("transform",o),this.isEdge()&&this.restyleForeignObjectElements()}zoomTreeBounds({x0:n,x1:t,y0:r,y1:i,params:o={animate:!0,scale:!0,onCompleted:()=>{}}}){const{centerG:s,svgWidth:a,svgHeight:c,svg:l,zoomBehavior:u,duration:f,lastTransform:d}=this.getChartState();let p=Math.min(8,.9/Math.max((t-n)/a,(i-r)/c)),y=z.zoomIdentity.translate(a/2,c/2);y=y.scale(o.scale?p:d.k),y=y.translate(-(n+t)/2,-(r+i)/2),l.transition().duration(o.animate?f:0).call(u.transform,y),s.transition().duration(o.animate?f:0).attr("transform","translate(0,0)").on("end",function(){o.onCompleted&&o.onCompleted()})}fit({animate:n=!0,nodes:t,scale:r=!0,onCompleted:i=()=>{}}={}){const o=this.getChartState(),{root:s}=o;let a=t||s.descendants();const c=z.min(a,d=>d.x+o.layoutBindings[o.layout].nodeLeftX(d)),l=z.max(a,d=>d.x+o.layoutBindings[o.layout].nodeRightX(d)),u=z.min(a,d=>d.y+o.layoutBindings[o.layout].nodeTopY(d)),f=z.max(a,d=>d.y+o.layoutBindings[o.layout].nodeBottomY(d));return this.zoomTreeBounds({params:{animate:n,scale:r,onCompleted:i},x0:c-50,x1:l+50,y0:u-50,y1:f+50}),this}loadPagingNodes(n){const t=this.getChartState();n.data._pagingButton=!1;const r=n.parent.data._pagingStep,i=t.pagingStep(n.parent),o=r+i;n.parent.data._pagingStep=o,this.updateNodesState()}setExpanded(n,t=!0){const r=this.getChartState(),i=r.allNodes.filter(({data:o})=>r.nodeId(o)==n)[0];if(!i)return console.log(`ORG CHART - ${t?"EXPAND":"COLLAPSE"} - Node with id (${n})  not found in the tree`),this;if(i.data._expanded=t,t==!1){const o=i.parent||{descendants:()=>[]};o.descendants().filter(a=>a!=o).forEach(a=>a.data._expanded=!1)}return this}setCentered(n){const t=this.getChartState(),o=t.generateRoot(t.data).descendants().filter(({data:a})=>t.nodeId(a).toString()==n.toString())[0];return o?(o.ancestors().forEach(a=>a.data._expanded=!0),o.data._centered=!0,o.data._expanded=!0,this):(console.log(`ORG CHART - CENTER - Node with id (${n}) not found in the tree`),this)}setHighlighted(n){const t=this.getChartState(),o=t.generateRoot(t.data).descendants().filter(a=>t.nodeId(a.data).toString()===n.toString())[0];return o?(o.ancestors().forEach(a=>a.data._expanded=!0),o.data._highlighted=!0,o.data._expanded=!0,o.data._centered=!0,this):(console.log(`ORG CHART - HIGHLIGHT - Node with id (${n})  not found in the tree`),this)}setUpToTheRootHighlighted(n){const t=this.getChartState(),o=t.generateRoot(t.data).descendants().filter(a=>t.nodeId(a.data).toString()===n.toString())[0];return o?(o.ancestors().forEach(a=>a.data._expanded=!0),o.data._upToTheRootHighlighted=!0,o.data._expanded=!0,o.ancestors().forEach(a=>a.data._upToTheRootHighlighted=!0),this):(console.log(`ORG CHART - HIGHLIGHTROOT - Node with id (${n}) not found in the tree`),this)}clearHighlighting(){const n=this.getChartState();return n.allNodes.forEach(t=>{t.data._highlighted=!1,t.data._upToTheRootHighlighted=!1}),this.update(n.root),this}fullscreen(n){const t=this.getChartState(),r=z.select(n||t.container).node();z.select(document).on("fullscreenchange."+t.id,function(i){(document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement)==r?setTimeout(s=>{t.svg.attr("height",window.innerHeight-40)},500):t.svg.attr("height",t.svgHeight)}),r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.msRequestFullscreen&&r.msRequestFullscreen()}zoomIn(){const{svg:n,zoomBehavior:t}=this.getChartState();n.transition().call(t.scaleBy,1.3)}zoomOut(){const{svg:n,zoomBehavior:t}=this.getChartState();n.transition().call(t.scaleBy,.78)}toDataURL(n,t){var r=new XMLHttpRequest;r.onload=function(){var i=new FileReader;i.onloadend=function(){t(i.result)},i.readAsDataURL(r.response)},r.open("GET",n),r.responseType="blob",r.send()}exportImg({full:n=!1,scale:t=3,onLoad:r=s=>s,save:i=!0,backgroundColor:o="#FAFAFA"}={}){const s=this,a=this.getChartState(),{svg:c,root:l}=a;let u=0;const f=c.selectAll("img");let d=f.size();const p=()=>{JSON.parse(JSON.stringify(s.lastTransform()));const y=s.duration();n&&s.fit();const{svg:x}=s.getChartState();setTimeout(C=>{s.downloadImage({node:x.node(),scale:t,isSvg:!1,backgroundColor:o,onAlreadySerialized:_=>{s.update(l)},imageName:a.imageName,onLoad:r,save:i})},n?y+10:0)};d>0?f.each(function(){s.toDataURL(this.src,y=>{this.src=y,++u==d&&p()})}):p()}exportSvg(){const{svg:n,imageName:t}=this.getChartState();return this.downloadImage({imageName:t,node:n.node(),scale:3,isSvg:!0}),this}expandAll(){const{allNodes:n,root:t,data:r}=this.getChartState();return r.forEach(i=>i._expanded=!0),this.render(),this}collapseAll(){const{allNodes:n,root:t}=this.getChartState();return n.forEach(r=>r.data._expanded=!1),this.initialExpandLevel(0),this.render(),this}downloadImage({node:n,scale:t=2,imageName:r="graph",isSvg:i=!1,save:o=!0,backgroundColor:s="#FAFAFA",onAlreadySerialized:a=l=>{},onLoad:c=l=>{}}){const l=n;function u(x,C){var _=document.createElement("a");typeof _.download=="string"?(document.body.appendChild(_),_.download=C,_.href=x,_.click(),document.body.removeChild(_)):location.replace(x)}function f(x){const C="http://www.w3.org/2000/xmlns/",_="http://www.w3.org/1999/xlink",$="http://www.w3.org/2000/svg";x=x.cloneNode(!0);const S=window.location.href+"#",k=document.createTreeWalker(x,NodeFilter.SHOW_ELEMENT,null,!1);for(;k.nextNode();)for(const R of k.currentNode.attributes)R.value.includes(S)&&(R.value=R.value.replace(S,"#"));return x.setAttributeNS(C,"xmlns",$),x.setAttributeNS(C,"xmlns:xlink",_),new XMLSerializer().serializeToString(x)}if(i){let x=f(l);x=`<?xml version="1.0" standalone="no"?>\r
`+x;var y="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(x);u(y,r+".svg"),a();return}const d=t,p=document.createElement("img");p.onload=function(){const x=document.createElement("canvas"),C=l.getBoundingClientRect();x.width=C.width*d,x.height=C.height*d;const _=x.getContext("2d");_.fillStyle=s,_.fillRect(0,0,C.width*d,C.height*d),_.drawImage(p,0,0,C.width*d,C.height*d);let $=x.toDataURL("image/png");c&&c($),o&&u($,r+".png")};var y="data:image/svg+xml; charset=utf8, "+encodeURIComponent(f(l));a(),p.src=y}getTextWidth(n,{fontSize:t=14,fontWeight:r=400,defaultFont:i="Helvetice",ctx:o}={}){return o.font=`${r||""} ${t}px ${i} `,o.measureText(n).width}clear(){const n=this.getChartState();z.select(window).on(`resize.${n.id}`,null),n.svg&&n.svg.selectAll("*").remove()}}const vs=({id:e,data:n})=>{const{t}=yn(),r=Ot.useRef(null),i=Ot.useRef(null),o=(n||[]).map(s=>({id:s.id.toString(),parentId:s.parent_id?s.parent_id.toString():null,name:s.name,role:s.role.startsWith("about.structure.roles.")?t(s.role):s.role,image:s.photo_path?`/storage/${s.photo_path}`:null}));return Ot.useLayoutEffect(()=>{if(r.current&&!i.current){const s=window.innerWidth<768;i.current=new _s().container(r.current).data(o).nodeWidth(c=>220).nodeHeight(c=>90).childrenMargin(c=>50).compactMarginBetween(c=>35).compactMarginPair(c=>30).compact(s).nodeContent(c=>`
                        <div style="
                            background: white;
                            border: 2px solid #1e3a5f;
                            border-radius: 12px;
                            padding: 10px;
                            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
                            display: flex;
                            align-items: center;
                            gap: 12px;
                            height: 100%;
                            width: 100%;
                            transition: all 0.3s;
                        ">
                            <div style="
                                width: 45px;
                                height: 45px;
                                border-radius: 50%;
                                background: #f1f5f9;
                                border: 1px solid #e2e8f0;
                                overflow: hidden;
                                flex-shrink: 0;
                                display: flex;
                                items-center;
                                justify-content: center;
                            ">
                                ${c.data.image?`<img src="${c.data.image}" style="width: 100%; height: 100%; object-fit: cover;" />`:`<span style="color: #1e3a5f; font-weight: 800; font-size: 16px;">${c.data.name.charAt(0)}</span>`}
                            </div>
                            <div style="flex: 1; min-width: 0;">
                                <div style="
                                    color: #1e3a5f;
                                    font-weight: 800;
                                    font-size: 13px;
                                    margin-bottom: 2px;
                                    text-transform: uppercase;
                                    white-space: nowrap;
                                    overflow: hidden;
                                    text-overflow: ellipsis;
                                ">${c.data.name}</div>
                                <div style="
                                    color: #64748b;
                                    font-size: 10px;
                                    font-weight: 500;
                                    white-space: nowrap;
                                    overflow: hidden;
                                    text-overflow: ellipsis;
                                ">${c.data.role}</div>
                            </div>
                        </div>
                    `).render(),setTimeout(()=>{i.current?.fit()},100);const a=()=>{const c=window.innerWidth<768;i.current?.compact(c)?.render()?.fit()};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}},[]),X.jsx("section",{id:e,className:"scroll-mt-32",children:X.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[X.jsxs("div",{className:"text-center mb-12",children:[X.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-[#1e3a5f]",children:t("about.structure.title")}),X.jsx("div",{className:"w-20 h-1 bg-[#1e3a5f] mx-auto mt-4 rounded-full"})]}),X.jsxs("div",{className:"relative bg-gray-50/50 rounded-3xl border border-gray-100 overflow-hidden",children:[X.jsx("div",{ref:r,className:"min-h-[600px] w-full cursor-grab active:cursor-grabbing"}),X.jsx("div",{className:"absolute bottom-6 right-6 flex flex-col gap-2",children:X.jsx("button",{onClick:()=>i.current?.fit(),className:"p-3 bg-white border border-gray-100 rounded-xl shadow-lg hover:bg-gray-50 transition-colors text-[#1e3a5f] font-bold text-xs",children:"FIT CHART"})})]}),X.jsxs("div",{className:"mt-8 flex justify-center items-center gap-4 text-gray-400 text-xs font-medium",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Scroll to Zoom"]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Drag to Pan"]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Click to Expand/Collapse"]})]})]})})};export{vs as default};
