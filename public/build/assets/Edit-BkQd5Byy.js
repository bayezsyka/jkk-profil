import{a as m,R as x,j as e,H as u,L as h,b}from"./app-C3Bv2MaN.js";import{A as g}from"./AdminLayout-Cqoz6FrM.js";import{M as p}from"./MultiImageUpload-DquvYfL_.js";import"./imageUtils-CYfP8GDk.js";function y({project:a}){const{data:r,setData:l,post:i,processing:o,errors:s}=m({_method:"PUT",title:a.title,location:a.location,date:a.date.split("T")[0],category:a.category,subcategory:a.subcategory||"",description:a.description||"",images:[]}),d=x.useCallback(t=>{l("images",t)},[l]),n=t=>{t.preventDefault(),i(route("admin.projects.update",a.id),{forceFormData:!0})},c=t=>{confirm("Apakah Anda yakin ingin menghapus gambar ini?")&&b.delete(route("admin.project-images.destroy",t),{preserveScroll:!0})};return e.jsxs(g,{children:[e.jsx(u,{title:"Edit Proyek"}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-2xl border border-slate-100 p-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Edit Proyek"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:a.title})]}),e.jsxs(h,{href:route("admin.projects.index"),className:"flex items-center text-slate-500 hover:text-slate-800 font-semibold transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali"]})]}),e.jsxs("form",{onSubmit:n,encType:"multipart/form-data",className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Nama Proyek"}),e.jsx("input",{type:"text",value:r.title,onChange:t=>l("title",t.target.value),className:"w-full border-slate-200 rounded-xl shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3",required:!0}),s.title&&e.jsx("div",{className:"text-red-500 text-xs mt-1 font-medium",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Lokasi"}),e.jsx("input",{type:"text",value:r.location,onChange:t=>l("location",t.target.value),className:"w-full border-slate-200 rounded-xl shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3",required:!0}),s.location&&e.jsx("div",{className:"text-red-500 text-xs mt-1 font-medium",children:s.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Tanggal Proyek"}),e.jsx("input",{type:"date",value:r.date,onChange:t=>l("date",t.target.value),className:"w-full border-slate-200 rounded-xl shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3",required:!0}),s.date&&e.jsx("div",{className:"text-red-500 text-xs mt-1 font-medium",children:s.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Kategori Utama"}),e.jsxs("select",{value:r.category,onChange:t=>l("category",t.target.value),className:"w-full border-slate-200 rounded-xl shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3 bg-white",children:[e.jsx("option",{value:"construction",children:"Construction"}),e.jsx("option",{value:"batching_plant",children:"Batching Plant"}),e.jsx("option",{value:"asphalt_mixing_plant",children:"Asphalt Mixing Plant"})]}),s.category&&e.jsx("div",{className:"text-red-500 text-xs mt-1 font-medium",children:s.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Sub-Layanan (Opsional)"}),e.jsx("input",{type:"text",value:r.subcategory,onChange:t=>l("subcategory",t.target.value),className:"w-full border-slate-200 rounded-xl shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3"}),s.subcategory&&e.jsx("div",{className:"text-red-500 text-xs mt-1 font-medium",children:s.subcategory})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Deskripsi"}),e.jsx("textarea",{value:r.description,onChange:t=>l("description",t.target.value),rows:4,className:"w-full border-slate-200 rounded-xl shadow-sm focus:border-blue-500 focus:ring-blue-500 p-4"}),s.description&&e.jsx("div",{className:"text-red-500 text-xs mt-1 font-medium",children:s.description})]}),a.images&&a.images.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-4",children:"Galeri Foto Saat Ini"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:a.images.map(t=>e.jsxs("div",{className:"relative group rounded-2xl overflow-hidden shadow-sm border border-slate-100",children:[e.jsx("img",{src:`/storage/${t.image_path}`,alt:"Project",className:"w-full h-32 object-cover transition-transform group-hover:scale-110"}),e.jsx("button",{type:"button",onClick:()=>c(t.id),className:"absolute top-2 right-2 bg-red-500 text-white rounded-xl p-1.5 opacity-0 group-hover:opacity-100 transition-all hover:bg-red-600 shadow-lg",title:"Hapus Gambar",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t.id))})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(p,{label:"Tambah Foto Baru",onChange:d,error:s.images})})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-slate-100",children:e.jsx("button",{type:"submit",disabled:o,className:`flex items-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-2xl transition-all shadow-lg shadow-blue-100 hover:-translate-y-0.5 ${o?"opacity-50 cursor-not-allowed":""}`,children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):"Perbarui Proyek"})})]})]})]})}export{y as default};
