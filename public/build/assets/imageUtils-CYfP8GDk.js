async function w(e,s=.8){return new Promise((i,a)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=t=>{const o=new Image;o.src=t.target?.result,o.onload=()=>{const n=document.createElement("canvas"),d=n.getContext("2d");n.width=o.width,n.height=o.height,d?.drawImage(o,0,0),n.toBlob(c=>{if(c){const l=new File([c],e.name.replace(/\.[^/.]+$/,"")+".webp",{type:"image/webp",lastModified:Date.now()});i(l)}else a(new Error("Canvas toBlob failed"))},"image/webp",s)},o.onerror=n=>a(n)},r.onerror=t=>a(t)})}function g(e,s=2){if(e===0)return"0 Bytes";const i=1024,a=s<0?0:s,r=["Bytes","KB","MB","GB","TB"],t=Math.floor(Math.log(e)/Math.log(i));return parseFloat((e/Math.pow(i,t)).toFixed(a))+" "+r[t]}export{w as c,g as f};
