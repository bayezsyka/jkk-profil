import{a as u,j as e,H as x,L as g,b}from"./app-DJckIexz.js";import{A as h}from"./AdminLayout-BA-M2ZbH.js";function y({project:a}){const{data:l,setData:r,post:d,processing:i,errors:s}=u({_method:"PUT",title:a.title,location:a.location,date:a.date.split("T")[0],category:a.category,subcategory:a.subcategory||"",description:a.description||"",images:[]}),o=t=>{t.preventDefault(),d(route("admin.projects.update",a.id),{forceFormData:!0})},n=t=>{t.target.files&&r("images",Array.from(t.target.files))},m=t=>{confirm("Apakah Anda yakin ingin menghapus gambar ini?")&&b.delete(route("admin.project-images.destroy",t),{preserveScroll:!0})};return e.jsxs(h,{children:[e.jsx(x,{title:"Edit Proyek"}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100 p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Edit Proyek: ",a.title]}),e.jsx(g,{href:route("admin.projects.index"),className:"text-gray-600 hover:text-gray-900",children:"Kembali ke Daftar"})]}),e.jsxs("form",{onSubmit:o,encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Title"}),e.jsx("input",{type:"text",value:l.title,onChange:t=>r("title",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),s.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:l.location,onChange:t=>r("location",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),s.location&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:l.date,onChange:t=>r("date",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),s.date&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:l.category,onChange:t=>r("category",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"construction",children:"Construction"}),e.jsx("option",{value:"batching_plant",children:"Batching Plant"}),e.jsx("option",{value:"asphalt_mixing_plant",children:"Asphalt Mixing Plant"})]}),s.category&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategory (Optional)"}),e.jsx("input",{type:"text",value:l.subcategory,onChange:t=>r("subcategory",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"e.g. Bridge, Drainage"}),s.subcategory&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.subcategory})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:t=>r("description",t.target.value),rows:4,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"}),s.description&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.description})]}),a.images&&a.images.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Existing Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.images.map(t=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:`/storage/${t.image_path}`,alt:"Project",className:"w-full h-32 object-cover"}),e.jsx("button",{type:"button",onClick:()=>m(t.id),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete Image",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t.id))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add New Images"}),e.jsx("input",{type:"file",multiple:!0,onChange:n,accept:"image/*",className:`w-full text-sm text-gray-500
                                file:mr-4 file:py-2 file:px-4
                                file:rounded-md file:border-0
                                file:text-sm file:font-semibold
                                file:bg-blue-50 file:text-blue-700
                                hover:file:bg-blue-100`}),s.images&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.images}),l.images.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected new files:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-500",children:Array.from(l.images).map((t,c)=>e.jsx("li",{children:t.name},c))})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:i,className:`bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md transition-all ${i?"opacity-50 cursor-not-allowed":""}`,children:i?"Menyimpan...":"Perbarui Proyek"})})]})]})]})}export{y as default};
